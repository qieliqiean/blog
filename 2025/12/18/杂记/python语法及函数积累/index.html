<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯ | ä¸”ç¦»ä¸”å®‰çš„ç¢ç¢å¿µ</title><meta name="author" content="lian"><meta name="copyright" content="lian"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#fdfcf8"><meta name="description" content="ç³»åˆ—æ–‡ç«    &#x2F;   æ‚è®°  ğŸ”—isinstance isinstance(variable, type):  è¿™æ˜¯ Python ç”¨æ¥æ£€æŸ¥ç±»å‹çš„ã€‚æ¯”å¦‚ isinstance(a, dict) å°±æ˜¯é—®ï¼šå˜é‡ a æ˜¯ä¸æ˜¯ä¸€ä¸ªå­—å…¸ï¼Ÿ è¿™æ®µé€»è¾‘å°±æ˜¯ä¸ºäº†å…¼å®¹å„ç§ä¸åŒçš„è¾“å…¥æ ¼å¼ï¼ˆè®­ç»ƒæ—¶ã€æµ‹è¯•æ—¶ã€å¯¼å‡ºæ¨¡å‹æ—¶è¾“å…¥æ ¼å¼éƒ½ä¸å¤ªä¸€æ ·ï¼‰ã€‚  1234567891011121314151617def extrac">
<meta property="og:type" content="article">
<meta property="og:title" content="pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯">
<meta property="og:url" content="https://qieliqiean.github.io/blog/2025/12/18/%E6%9D%82%E8%AE%B0/python%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%87%BD%E6%95%B0%E7%A7%AF%E7%B4%AF/index.html">
<meta property="og:site_name" content="ä¸”ç¦»ä¸”å®‰çš„ç¢ç¢å¿µ">
<meta property="og:description" content="ç³»åˆ—æ–‡ç«    &#x2F;   æ‚è®°  ğŸ”—isinstance isinstance(variable, type):  è¿™æ˜¯ Python ç”¨æ¥æ£€æŸ¥ç±»å‹çš„ã€‚æ¯”å¦‚ isinstance(a, dict) å°±æ˜¯é—®ï¼šå˜é‡ a æ˜¯ä¸æ˜¯ä¸€ä¸ªå­—å…¸ï¼Ÿ è¿™æ®µé€»è¾‘å°±æ˜¯ä¸ºäº†å…¼å®¹å„ç§ä¸åŒçš„è¾“å…¥æ ¼å¼ï¼ˆè®­ç»ƒæ—¶ã€æµ‹è¯•æ—¶ã€å¯¼å‡ºæ¨¡å‹æ—¶è¾“å…¥æ ¼å¼éƒ½ä¸å¤ªä¸€æ ·ï¼‰ã€‚  1234567891011121314151617def extrac">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qieliqiean.github.io/blog/image/q4SynOBjcxn5gA6.jpeg">
<meta property="article:published_time" content="2025-12-18T02:04:06.000Z">
<meta property="article:modified_time" content="2026-02-18T11:59:46.458Z">
<meta property="article:author" content="lian">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qieliqiean.github.io/blog/image/q4SynOBjcxn5gA6.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯",
  "url": "https://qieliqiean.github.io/blog/2025/12/18/%E6%9D%82%E8%AE%B0/python%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%87%BD%E6%95%B0%E7%A7%AF%E7%B4%AF/",
  "image": "https://qieliqiean.github.io/blog/image/q4SynOBjcxn5gA6.jpeg",
  "datePublished": "2025-12-18T02:04:06.000Z",
  "dateModified": "2026-02-18T11:59:46.458Z",
  "author": [
    {
      "@type": "Person",
      "name": "lian",
      "url": "https://qieliqiean.github.io/blog/"
    }
  ]
}</script><link rel="shortcut icon" href="/blog/image/1.jpg"><link rel="canonical" href="https://qieliqiean.github.io/blog/2025/12/18/%E6%9D%82%E8%AE%B0/python%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%87%BD%E6%95%B0%E7%A7%AF%E7%B4%AF/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0f172a')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fdfcf8')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6b5d1303d19816191830cd73eccfdb1e";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/blog/',
  algolia: undefined,
  localSearch: {"path":"/blog/search.xml","preload":false,"top_n_per_article":3,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=LXGW+WenKai:wght@400;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/blog/css/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/blog/image/IMG_20250131_155849.jpg" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">43</div></a><a href="/blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">21</div></a><a href="/blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/blog/easter-egg/"><i class="fa-fw fas fa-egg"></i><span> å½©è›‹</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-user"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/image/q4SynOBjcxn5gA6.jpeg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/blog/"><img class="site-icon" src="/blog/image/background1.png" alt="Logo"><span class="site-name">ä¸”ç¦»ä¸”å®‰çš„ç¢ç¢å¿µ</span></a><a class="nav-page-title" href="/blog/"><span class="site-name">pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/blog/easter-egg/"><i class="fa-fw fas fa-egg"></i><span> å½©è›‹</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-user"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-12-18T02:04:06.000Z" title="å‘è¡¨äº 2025-12-18 10:04:06">2025-12-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2026-02-18T11:59:46.458Z" title="æ›´æ–°äº 2026-02-18 19:59:46">2026-02-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">8.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>32åˆ†é’Ÿ</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><nav class="series-breadcrumb" aria-label="ç³»åˆ—å¯¼èˆª">
  <a href="/blog/series/">ç³»åˆ—æ–‡ç« </a>
  <span class="series-breadcrumb__sep">/</span>
  <a href="/blog/series/5p2C6K6w/">æ‚è®°</a>
</nav>
<h3 id="isinstance"><a class="header-anchor" href="#isinstance">ğŸ”—</a>isinstance</h3>
<p><code>isinstance(variable, type)</code>:</p>
<ul>
<li>è¿™æ˜¯ Python ç”¨æ¥<strong>æ£€æŸ¥ç±»å‹</strong>çš„ã€‚æ¯”å¦‚ <code>isinstance(a, dict)</code> å°±æ˜¯é—®ï¼šå˜é‡ <code>a</code> æ˜¯ä¸æ˜¯ä¸€ä¸ªå­—å…¸ï¼Ÿ</li>
<li>è¿™æ®µé€»è¾‘å°±æ˜¯ä¸ºäº†å…¼å®¹å„ç§ä¸åŒçš„è¾“å…¥æ ¼å¼ï¼ˆè®­ç»ƒæ—¶ã€æµ‹è¯•æ—¶ã€å¯¼å‡ºæ¨¡å‹æ—¶è¾“å…¥æ ¼å¼éƒ½ä¸å¤ªä¸€æ ·ï¼‰ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">extract_feat</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self, batch_inputs: Tensor,</span></span><br><span class="line"><span class="params">        batch_data_samples: SampleList</span>) -&gt; <span class="type">Tuple</span>[<span class="type">Tuple</span>[Tensor], Tensor]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Extract features.&quot;&quot;&quot;</span></span><br><span class="line">    txt_feats = <span class="literal">None</span>  <span class="comment"># 1. å…ˆåˆå§‹åŒ–ä¸€ä¸ªç©ºå˜é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># --- 2. ä¸‹é¢è¿™ä¸€å¤§æ®µ if-elif-else æ˜¯åœ¨æ‰¾ï¼šæ–‡æœ¬åœ¨å“ªé‡Œï¼Ÿ ---</span></span><br><span class="line">    <span class="keyword">if</span> batch_data_samples <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># æƒ…å†µAï¼šæ²¡ç»™å…ƒæ•°æ®ï¼Œè¯´æ˜æ˜¯æé€Ÿæ¨¡å¼ï¼Œç›´æ¥ç”¨å­˜å¥½çš„</span></span><br><span class="line">        texts = <span class="variable language_">self</span>.texts</span><br><span class="line">        txt_feats = <span class="variable language_">self</span>.text_feats</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(batch_data_samples, <span class="built_in">dict</span>) <span class="keyword">and</span> <span class="string">&#x27;texts&#x27;</span> <span class="keyword">in</span> batch_data_samples:</span><br><span class="line">        <span class="comment"># æƒ…å†µBï¼šç»™çš„æ˜¯å­—å…¸ï¼ˆé€šå¸¸æ˜¯è®­ç»ƒæ—¶ï¼‰ï¼Œä»å­—å…¸é‡Œå–æ–‡æœ¬</span></span><br><span class="line">        texts = batch_data_samples[<span class="string">&#x27;texts&#x27;</span>]</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(batch_data_samples, <span class="built_in">list</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(batch_data_samples[<span class="number">0</span>], <span class="string">&#x27;texts&#x27;</span>):</span><br><span class="line">        <span class="comment"># æƒ…å†µCï¼šç»™çš„æ˜¯åˆ—è¡¨ï¼ˆé€šå¸¸æ˜¯æ¨ç†æ—¶ï¼‰ï¼Œéå†åˆ—è¡¨å–æ–‡æœ¬</span></span><br><span class="line">        texts = [data_sample.texts <span class="keyword">for</span> data_sample <span class="keyword">in</span> batch_data_samples]</span><br></pre></td></tr></table></figure>
<h3 id="hasattr"><a class="header-anchor" href="#hasattr">ğŸ”—</a>hasattr</h3>
<p><code>hasattr</code> æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ï¼ˆattributeï¼‰ã€‚å®ƒå¸¸ç”¨äºåŠ¨æ€æ£€æŸ¥å¯¹è±¡çš„å±æ€§å­˜åœ¨æ€§ï¼Œé¿å…ç›´æ¥è®¿é—®å±æ€§æ—¶å¼•å‘ <code>AttributeError</code> å¼‚å¸¸ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è®²è§£ã€‚</p>
<h4 id="1-å‡½æ•°è¯­æ³•"><a class="header-anchor" href="#1-å‡½æ•°è¯­æ³•">ğŸ”—</a>1. <strong>å‡½æ•°è¯­æ³•</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">hasattr</span>(<span class="built_in">object</span>, name)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>å‚æ•°</strong>ï¼š
<ul>
<li><code>object</code>ï¼šè¦æ£€æŸ¥çš„å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ç±»å®ä¾‹ã€æ¨¡å—ã€ç±»ç­‰ï¼‰ã€‚</li>
<li><code>name</code>ï¼šå±æ€§åçš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ <code>'method_name'</code> æˆ– <code>'variable_name'</code>ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>è¿”å›å€¼</strong>ï¼š
<ul>
<li>å¦‚æœå¯¹è±¡å…·æœ‰è¯¥å±æ€§ï¼Œè¿”å› <code>True</code>ã€‚</li>
<li>å¦‚æœå¯¹è±¡ä¸å…·æœ‰è¯¥å±æ€§ï¼Œè¿”å› <code>False</code>ã€‚</li>
</ul>
</li>
</ul>
<h4 id="2-åŸºæœ¬ç”¨æ³•ç¤ºä¾‹"><a class="header-anchor" href="#2-åŸºæœ¬ç”¨æ³•ç¤ºä¾‹">ğŸ”—</a>2. <strong>åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</strong></h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ç±»ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = name  <span class="comment"># å®ä¾‹å±æ€§</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Hello, <span class="subst">&#123;self.name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå®ä¾‹</span></span><br><span class="line">p = Person(<span class="string">&quot;Alice&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½¿ç”¨ <code>hasattr</code> æ£€æŸ¥å±æ€§ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥å®ä¾‹å±æ€§</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(p, <span class="string">&#x27;name&#x27;</span>))    <span class="comment"># è¾“å‡º: Trueï¼ˆå­˜åœ¨ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ–¹æ³•</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(p, <span class="string">&#x27;greet&#x27;</span>))   <span class="comment"># è¾“å‡º: Trueï¼ˆå­˜åœ¨ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ä¸å­˜åœ¨çš„å±æ€§</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(p, <span class="string">&#x27;age&#x27;</span>))     <span class="comment"># è¾“å‡º: Falseï¼ˆä¸å­˜åœ¨ï¼‰</span></span><br></pre></td></tr></table></figure>
<h4 id="3-é«˜çº§ç”¨æ³•"><a class="header-anchor" href="#3-é«˜çº§ç”¨æ³•">ğŸ”—</a>3. <strong>é«˜çº§ç”¨æ³•</strong></h4>
<ul>
<li>
<p><strong>æ£€æŸ¥æ¨¡å—å±æ€§</strong>ï¼š<code>hasattr</code> å¯ä»¥ç”¨äºæ¨¡å—ã€‚ä¾‹å¦‚ï¼Œæ£€æŸ¥ <code>math</code> æ¨¡å—æ˜¯å¦æœ‰ <code>sqrt</code> å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(math, <span class="string">&#x27;sqrt&#x27;</span>))  <span class="comment"># è¾“å‡º: True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(math, <span class="string">&#x27;nonexistent&#x27;</span>))  <span class="comment"># è¾“å‡º: False</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>æ£€æŸ¥ç±»å±æ€§</strong>ï¼šå¯ä»¥ç›´æ¥æ£€æŸ¥ç±»æœ¬èº«ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(Person, <span class="string">&#x27;greet&#x27;</span>))  <span class="comment"># è¾“å‡º: Trueï¼ˆç±»æ–¹æ³•ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>ä¸ <code>getattr</code> å’Œ <code>setattr</code> ç»“åˆ</strong>ï¼šå¸¸ç”¨äºåŠ¨æ€å±æ€§æ“ä½œã€‚å¦‚æœ <code>hasattr</code> è¿”å› Trueï¼Œå†ä½¿ç”¨ <code>getattr</code> è·å–å±æ€§å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hasattr</span>(p, <span class="string">&#x27;name&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">getattr</span>(p, <span class="string">&#x27;name&#x27;</span>))  <span class="comment"># è¾“å‡º: Alice</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">setattr</span>(p, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Default&#x27;</span>)  <span class="comment"># å¦‚æœä¸å­˜åœ¨ï¼Œå¯ä»¥è®¾ç½®</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>å¤„ç†ç»§æ‰¿</strong>ï¼š<code>hasattr</code> ä¼šè€ƒè™‘ç»§æ‰¿é“¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„å±æ€§ï¼Œå®ƒä¹Ÿä¼šè¿”å› Trueã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span>(<span class="title class_ inherited__">Person</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">e = Employee(<span class="string">&quot;Bob&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(e, <span class="string">&#x27;greet&#x27;</span>))  <span class="comment"># è¾“å‡º: Trueï¼ˆç»§æ‰¿è‡ª Personï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="4-æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#4-æ³¨æ„äº‹é¡¹">ğŸ”—</a>4. <strong>æ³¨æ„äº‹é¡¹</strong></h4>
<ul>
<li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼š<code>hasattr</code> å†…éƒ¨ä¼šå°è¯•è®¿é—®å±æ€§å¹¶æ•è· <code>AttributeError</code>ï¼Œæ‰€ä»¥åœ¨æ€§èƒ½æ•æ„Ÿçš„å¾ªç¯ä¸­ï¼Œé¿å…é¢‘ç¹ä½¿ç”¨ã€‚å¯ä»¥è€ƒè™‘ç›´æ¥ç”¨ <code>try-except</code> å—æ›¿ä»£ã€‚</li>
<li><strong>ç‰¹æ®Šå±æ€§</strong>ï¼šå¯¹äºåƒ <code>__dict__</code> æˆ– <code>__class__</code> è¿™æ ·çš„å†…ç½®ç‰¹æ®Šå±æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>hasattr</code> æ£€æŸ¥ã€‚</li>
<li><strong>ä¸æ¨èæ»¥ç”¨</strong>ï¼šPython å“²å­¦æ˜¯â€œEAFPâ€ï¼ˆEasier to Ask for Forgiveness than Permissionï¼‰ï¼Œå³ä¼˜å…ˆå°è¯•è®¿é—®å±æ€§å¹¶å¤„ç†å¼‚å¸¸ï¼Œè€Œä¸æ˜¯æ€»æ˜¯å…ˆæ£€æŸ¥ã€‚ä½† <code>hasattr</code> åœ¨æŸäº›åŠ¨æ€åœºæ™¯ï¼ˆå¦‚æ’ä»¶ç³»ç»Ÿï¼‰å¾ˆæœ‰ç”¨ã€‚</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼š<code>hasattr</code> ä» Python 1.0 å¼€å§‹å°±å­˜åœ¨ï¼Œåœ¨ Python 2 å’Œ 3 ä¸­å‡å¯ç”¨ã€‚</li>
</ul>
<p>å¦‚æœæ‚¨æœ‰å…·ä½“çš„ä»£ç åœºæ™¯æˆ–ç¤ºä¾‹ï¼Œå¯ä»¥æä¾›æ›´å¤šç»†èŠ‚ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥è§£é‡Šï¼</p>
<h3 id="Python-ä¸­-list-å’Œ-dict-çš„åŒºåˆ«"><a class="header-anchor" href="#Python-ä¸­-list-å’Œ-dict-çš„åŒºåˆ«">ğŸ”—</a>Python ä¸­ list å’Œ dict çš„åŒºåˆ«</h3>
<p>Python ä¸­çš„ <code>list</code> å’Œ <code>dict</code> æ˜¯ä¸¤ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨å’Œæ“ä½œæ•°æ®é›†åˆã€‚å®ƒä»¬åœ¨è®¾è®¡ç›®çš„ã€å­˜å‚¨æ–¹å¼å’Œä½¿ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä¸‹é¢æˆ‘ä»å¤šä¸ªè§’åº¦è®²è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œå¹¶æä¾›ç¤ºä¾‹ã€‚</p>
<h4 id="1-åŸºæœ¬å®šä¹‰å’Œç‰¹ç‚¹"><a class="header-anchor" href="#1-åŸºæœ¬å®šä¹‰å’Œç‰¹ç‚¹">ğŸ”—</a>1. <strong>åŸºæœ¬å®šä¹‰å’Œç‰¹ç‚¹</strong></h4>
<ul>
<li><strong>listï¼ˆåˆ—è¡¨ï¼‰</strong>ï¼šæ˜¯ä¸€ç§æœ‰åºçš„ã€å¯å˜åºåˆ—ï¼Œæ”¯æŒé‡å¤å…ƒç´ ã€‚ä¸»è¦ç”¨äºå­˜å‚¨æœ‰åºçš„æ•°æ®é›†åˆï¼Œå¦‚æ•°ç»„ã€‚</li>
<li><strong>dictï¼ˆå­—å…¸ï¼‰</strong>ï¼šæ˜¯ä¸€ç§æ— åºçš„ï¼ˆåœ¨ Python 3.7 ä¹‹å‰ï¼›ä» 3.7 å¼€å§‹æ’å…¥æœ‰åºï¼‰ã€é”®å€¼å¯¹æ˜ å°„ï¼Œæ”¯æŒå”¯ä¸€é”®ã€‚ä¸»è¦ç”¨äºå­˜å‚¨é”®-å€¼å…³è”çš„æ•°æ®ï¼Œå¦‚é…ç½®æˆ–æ˜ å°„è¡¨ã€‚</li>
</ul>
<h4 id="2-å…³é”®åŒºåˆ«æ¯”è¾ƒ"><a class="header-anchor" href="#2-å…³é”®åŒºåˆ«æ¯”è¾ƒ">ğŸ”—</a>2. <strong>å…³é”®åŒºåˆ«æ¯”è¾ƒ</strong></h4>
<p>ä½¿ç”¨è¡¨æ ¼æ¥æ¸…æ™°å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹é¢</th>
<th>listï¼ˆåˆ—è¡¨ï¼‰</th>
<th>dictï¼ˆå­—å…¸ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å­˜å‚¨ç»“æ„</strong></td>
<td>æœ‰åºåºåˆ—ï¼ˆå…ƒç´ é€šè¿‡ç´¢å¼•è®¿é—®ï¼‰</td>
<td>é”®å€¼å¯¹ï¼ˆkey-value pairsï¼Œé€šè¿‡é”®è®¿é—®ï¼‰</td>
</tr>
<tr>
<td><strong>æœ‰åºæ€§</strong></td>
<td>å§‹ç»ˆæœ‰åºï¼ˆæ’å…¥é¡ºåºä¿æŒï¼‰</td>
<td>Python 3.6 åŠä»¥ä¸‹ï¼šæ— åºï¼›3.7+ï¼šæ’å…¥æœ‰åº</td>
</tr>
<tr>
<td><strong>å…ƒç´ è®¿é—®</strong></td>
<td>é€šè¿‡æ•´æ•°ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œå¦‚ <code>lst[0]</code></td>
<td>é€šè¿‡é”®ï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•´æ•°ç­‰ä¸å¯å˜ç±»å‹ï¼‰ï¼Œå¦‚ <code>dct['key']</code></td>
</tr>
<tr>
<td><strong>å…ƒç´ å”¯ä¸€æ€§</strong></td>
<td>æ”¯æŒé‡å¤å…ƒç´ </td>
<td>é”®å¿…é¡»å”¯ä¸€ï¼ˆå€¼å¯é‡å¤ï¼‰</td>
</tr>
<tr>
<td><strong>å¯å˜æ€§</strong></td>
<td>å¯å˜ï¼ˆå¯ä»¥æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å…ƒç´ ï¼‰</td>
<td>å¯å˜ï¼ˆå¯ä»¥æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹é”®å€¼å¯¹ï¼‰</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>ç´¢å¼•è®¿é—® O(1)ï¼›æœç´¢å…ƒç´  O(n)</td>
<td>é”®è®¿é—® O(1)ï¼ˆå“ˆå¸Œè¡¨å®ç°ï¼‰ï¼›é€‚åˆå¿«é€ŸæŸ¥æ‰¾</td>
</tr>
<tr>
<td><strong>å†…å­˜å ç”¨</strong></td>
<td>è¾ƒå°‘ï¼ˆä»…å­˜å‚¨å…ƒç´ ï¼‰</td>
<td>è¾ƒå¤šï¼ˆå­˜å‚¨é”®å’Œå€¼ï¼ŒåŠ ä¸Šå“ˆå¸Œå¼€é”€ï¼‰</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>å­˜å‚¨æœ‰åºæ•°æ®ï¼Œå¦‚é˜Ÿåˆ—ã€æ ˆ</td>
<td>å­˜å‚¨æ˜ å°„å…³ç³»ï¼Œå¦‚ JSON æ•°æ®ã€é…ç½®</td>
</tr>
</tbody>
</table>
<h4 id="3-åˆ›å»ºå’Œè¯­æ³•ç¤ºä¾‹"><a class="header-anchor" href="#3-åˆ›å»ºå’Œè¯­æ³•ç¤ºä¾‹">ğŸ”—</a>3. <strong>åˆ›å»ºå’Œè¯­æ³•ç¤ºä¾‹</strong></h4>
<ul>
<li>
<p><strong>list</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="number">2</span>]  <span class="comment"># æ”¯æŒå¼‚æ„å…ƒç´ å’Œé‡å¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®å’Œæ“ä½œ</span></span><br><span class="line"><span class="built_in">print</span>(my_list[<span class="number">0</span>])  <span class="comment"># è¾“å‡º: 1</span></span><br><span class="line">my_list.append(<span class="number">4</span>)  <span class="comment"># æ·»åŠ å…ƒç´ </span></span><br><span class="line">my_list[<span class="number">1</span>] = <span class="string">&#x27;banana&#x27;</span>  <span class="comment"># ä¿®æ”¹</span></span><br><span class="line"><span class="keyword">del</span> my_list[<span class="number">2</span>]  <span class="comment"># åˆ é™¤</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>dict</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;  <span class="comment"># é”®å¿…é¡»å”¯ä¸€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®å’Œæ“ä½œ</span></span><br><span class="line"><span class="built_in">print</span>(my_dict[<span class="string">&#x27;name&#x27;</span>])  <span class="comment"># è¾“å‡º: Alice</span></span><br><span class="line">my_dict[<span class="string">&#x27;age&#x27;</span>] = <span class="number">31</span>  <span class="comment"># ä¿®æ”¹</span></span><br><span class="line">my_dict[<span class="string">&#x27;email&#x27;</span>] = <span class="string">&#x27;alice@example.com&#x27;</span>  <span class="comment"># æ·»åŠ </span></span><br><span class="line"><span class="keyword">del</span> my_dict[<span class="string">&#x27;city&#x27;</span>]  <span class="comment"># åˆ é™¤</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="4-å¸¸è§æ“ä½œå’Œæ–¹æ³•"><a class="header-anchor" href="#4-å¸¸è§æ“ä½œå’Œæ–¹æ³•">ğŸ”—</a>4. <strong>å¸¸è§æ“ä½œå’Œæ–¹æ³•</strong></h4>
<ul>
<li><strong>list</strong> å¸¸ç”¨æ–¹æ³•ï¼š<code>append()</code>ã€<code>extend()</code>ã€<code>insert()</code>ã€<code>remove()</code>ã€<code>pop()</code>ã€<code>sort()</code>ã€<code>reverse()</code> ç­‰ã€‚æ”¯æŒåˆ‡ç‰‡ï¼ˆå¦‚ <code>my_list[1:3]</code>ï¼‰ã€‚</li>
<li><strong>dict</strong> å¸¸ç”¨æ–¹æ³•ï¼š<code>get()</code>ï¼ˆå®‰å…¨è·å–å€¼ï¼‰ã€<code>keys()</code>ã€<code>values()</code>ã€<code>items()</code>ã€<code>update()</code>ã€<code>pop()</code> ç­‰ã€‚æ”¯æŒè¿­ä»£é”®å€¼å¯¹ï¼ˆå¦‚ <code>for k, v in my_dict.items():</code>ï¼‰ã€‚</li>
</ul>
<h4 id="5-æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#5-æ³¨æ„äº‹é¡¹">ğŸ”—</a>5. <strong>æ³¨æ„äº‹é¡¹</strong></h4>
<ul>
<li><strong>ç±»å‹é™åˆ¶</strong>ï¼šlist çš„å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼›dict çš„é”®å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼ˆå¦‚ strã€intã€tupleï¼‰ï¼Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚</li>
<li><strong>è½¬æ¢</strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>list(my_dict.keys())</code> å°† dict çš„é”®è½¬ä¸º listï¼Œæˆ– <code>dict(zip(keys, values))</code> åˆ›å»º dictã€‚</li>
<li><strong>æ€§èƒ½é€‰æ‹©</strong>ï¼šå¦‚æœéœ€è¦å¿«é€ŸæŸ¥æ‰¾ï¼Œä½¿ç”¨ dictï¼›å¦‚æœéœ€è¦ä¿æŒé¡ºåºä¸”é¢‘ç¹ç´¢å¼•ï¼Œä½¿ç”¨ listï¼ˆæˆ– collections.OrderedDict å¦‚æœéœ€è¦æ—§ç‰ˆæœ‰åº dictï¼‰ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šlist è®¿é—®è¶Šç•ŒæŠ› <code>IndexError</code>ï¼›dict è®¿é—®ä¸å­˜åœ¨é”®æŠ› <code>KeyError</code>ï¼ˆå¯ç”¨ <code>get()</code> é¿å…ï¼‰ã€‚</li>
</ul>
<p>å¦‚æœæ‚¨æœ‰å…·ä½“çš„ä»£ç ç¤ºä¾‹æˆ–åº”ç”¨åœºæ™¯ï¼Œå¯ä»¥æä¾›æ›´å¤šç»†èŠ‚ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•è®²è§£ï¼</p>
<h1 id="PyTorchå¼ é‡å½¢çŠ¶ä¸nn-functional-normalize"><a class="header-anchor" href="#PyTorchå¼ é‡å½¢çŠ¶ä¸nn-functional-normalize">ğŸ”—</a>PyTorchå¼ é‡å½¢çŠ¶ä¸nn.functional.normalize</h1>
<h2 id="ä¸€ã€PyTorchå¼ é‡å½¢çŠ¶çš„æ ¸å¿ƒæ¦‚å¿µ"><a class="header-anchor" href="#ä¸€ã€PyTorchå¼ é‡å½¢çŠ¶çš„æ ¸å¿ƒæ¦‚å¿µ">ğŸ”—</a>ä¸€ã€PyTorchå¼ é‡å½¢çŠ¶çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 id="1-å¼ é‡å½¢çŠ¶çš„åŸºæœ¬è§„åˆ™"><a class="header-anchor" href="#1-å¼ é‡å½¢çŠ¶çš„åŸºæœ¬è§„åˆ™">ğŸ”—</a>1. å¼ é‡å½¢çŠ¶çš„åŸºæœ¬è§„åˆ™</h3>
<p>PyTorchä¸­å¼ é‡çš„å½¢çŠ¶ï¼ˆ<code>shape</code>ï¼‰ä»¥<strong>å…ƒç»„å½¢å¼</strong>è¡¨ç¤ºï¼Œç»´åº¦é¡ºåºä¸º<strong>ä»å¤–åˆ°å†…</strong>ï¼ˆæœ€å¤–å±‚ç»´åº¦â†’ä¸­é—´ç»´åº¦â†’æœ€å†…å±‚ç»´åº¦ï¼‰ï¼Œæ¯ä¸ªæ•°å€¼ä»£è¡¨å¯¹åº”å±‚çº§çš„å…ƒç´ ä¸ªæ•°ã€‚</p>
<p>å¯¹äºæ–‡æœ¬ç‰¹å¾å¼ é‡<code>txt_feats</code>ï¼Œå…¶ä¸‰ç»´å½¢çŠ¶<code>[d0, d1, d2]</code>é€šå¸¸å¯¹åº”ä»¥ä¸‹ä¸šåŠ¡å«ä¹‰ï¼š</p>
<table>
<thead>
<tr>
<th>ç»´åº¦ç´¢å¼•</th>
<th>å¸¸è§å‘½å</th>
<th>ä¸šåŠ¡å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>d0ï¼ˆç¬¬0ç»´ï¼‰</td>
<td>batch_size</td>
<td>ä¸€æ¬¡å¤„ç†çš„æ–‡æœ¬æ ·æœ¬æ‰¹æ¬¡æ•°é‡</td>
</tr>
<tr>
<td>d1ï¼ˆç¬¬1ç»´ï¼‰</td>
<td>num_prompts</td>
<td>æ¯ä¸ªæ‰¹æ¬¡ä¸­çš„æ–‡æœ¬æç¤ºæ•°é‡ï¼ˆå¦‚â€œäººâ€â€œè½¦â€â€œç‹—â€ç­‰ç±»åˆ«åç§°ï¼‰</td>
</tr>
<tr>
<td>d2ï¼ˆç¬¬2ç»´ï¼‰</td>
<td>feature_dim</td>
<td>æ¯ä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾å‘é‡ç»´åº¦ï¼ˆç‰¹å¾çš„æ•°å€¼ä¸ªæ•°ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="2-ç›´è§‚ç±»æ¯”ï¼šå¤šå±‚æ”¶çº³ç›’"><a class="header-anchor" href="#2-ç›´è§‚ç±»æ¯”ï¼šå¤šå±‚æ”¶çº³ç›’">ğŸ”—</a>2. ç›´è§‚ç±»æ¯”ï¼šå¤šå±‚æ”¶çº³ç›’</h3>
<p>å°†å¼ é‡æƒ³è±¡æˆ<strong>å¤šå±‚æ”¶çº³ç›’</strong>ï¼Œå¯å¿«é€Ÿç†è§£ç»´åº¦å…³ç³»ï¼š</p>
<ul>
<li>ç¬¬0ç»´ï¼šå¤§çš„â€œå¿«é€’ç®±â€ï¼Œæ•°é‡å¯¹åº”æ‰¹æ¬¡å¤§å°ï¼›</li>
<li>ç¬¬1ç»´ï¼šå¿«é€’ç®±é‡Œçš„â€œå°ç›’å­â€ï¼Œæ•°é‡å¯¹åº”æ–‡æœ¬æç¤ºæ•°ï¼›</li>
<li>ç¬¬2ç»´ï¼šå°ç›’å­é‡Œçš„â€œæ•°å­—å¡ç‰‡â€ï¼Œæ•°é‡å¯¹åº”ç‰¹å¾ç»´åº¦ã€‚</li>
</ul>
<h2 id="äºŒã€å…·ä½“å¼ é‡å½¢çŠ¶è§£æ"><a class="header-anchor" href="#äºŒã€å…·ä½“å¼ é‡å½¢çŠ¶è§£æ">ğŸ”—</a>äºŒã€å…·ä½“å¼ é‡å½¢çŠ¶è§£æ</h2>
<h3 id="ç¤ºä¾‹1ï¼šå½¢çŠ¶ä¸º-1-2-3-çš„æ–‡æœ¬ç‰¹å¾å¼ é‡"><a class="header-anchor" href="#ç¤ºä¾‹1ï¼šå½¢çŠ¶ä¸º-1-2-3-çš„æ–‡æœ¬ç‰¹å¾å¼ é‡">ğŸ”—</a>ç¤ºä¾‹1ï¼šå½¢çŠ¶ä¸º<code>[1, 2, 3]</code>çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</h3>
<h4 id="1-å¼ é‡æ„å»ºä¸ç»“æ„æ‹†è§£"><a class="header-anchor" href="#1-å¼ é‡æ„å»ºä¸ç»“æ„æ‹†è§£">ğŸ”—</a>1. å¼ é‡æ„å»ºä¸ç»“æ„æ‹†è§£</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºå½¢çŠ¶ä¸º[1, 2, 3]çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</span></span><br><span class="line">txt_feats = torch.tensor([</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>],  <span class="comment"># ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬0ä¸ªæ–‡æœ¬æç¤ºç‰¹å¾</span></span><br><span class="line">        [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>]   <span class="comment"># ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬1ä¸ªæ–‡æœ¬æç¤ºç‰¹å¾</span></span><br><span class="line">    ]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¼ é‡å½¢çŠ¶ï¼š&quot;</span>, txt_feats.shape)  <span class="comment"># è¾“å‡ºï¼štorch.Size([1, 2, 3])</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¼ é‡å½¢çŠ¶ï¼š torch.Size([1, 2, 3])</span><br></pre></td></tr></table></figure>
<p>ç»“æ„å¯¹åº”ç»´åº¦å«ä¹‰ï¼š</p>
<ul>
<li>d0=1ï¼š1ä¸ªæ‰¹æ¬¡ï¼ˆ1ä¸ªå¿«é€’ç®±ï¼‰ï¼›</li>
<li>d1=2ï¼šæ¯ä¸ªæ‰¹æ¬¡æœ‰2ä¸ªæ–‡æœ¬æç¤ºï¼ˆ2ä¸ªå°ç›’å­ï¼‰ï¼›</li>
<li>d2=3ï¼šæ¯ä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾æ˜¯3ç»´å‘é‡ï¼ˆ3å¼ æ•°å­—å¡ç‰‡ï¼‰ã€‚</li>
</ul>
<h4 id="2-ç´¢å¼•å–å€¼éªŒè¯ç»´åº¦"><a class="header-anchor" href="#2-ç´¢å¼•å–å€¼éªŒè¯ç»´åº¦">ğŸ”—</a>2. ç´¢å¼•å–å€¼éªŒè¯ç»´åº¦</h4>
<p>é€šè¿‡<strong>ä¸‹æ ‡ç´¢å¼•</strong>ï¼ˆä»0å¼€å§‹ï¼‰å¯ç²¾å‡†å–å‡ºå¼ é‡ä¸­ä¸åŒå±‚çº§çš„å…ƒç´ ï¼ŒéªŒè¯ç»´åº¦å«ä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºå½¢çŠ¶ä¸º[1, 2, 3]çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</span></span><br><span class="line">txt_feats = torch.tensor([</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>],  <span class="comment"># ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬0ä¸ªæ–‡æœ¬æç¤ºç‰¹å¾</span></span><br><span class="line">        [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>]   <span class="comment"># ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬1ä¸ªæ–‡æœ¬æç¤ºç‰¹å¾</span></span><br><span class="line">    ]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¼ é‡å½¢çŠ¶ï¼š&quot;</span>, txt_feats.shape)  <span class="comment"># è¾“å‡ºï¼štorch.Size([1, 2, 3])</span></span><br><span class="line"><span class="comment"># å–ç¬¬0ä¸ªæ‰¹æ¬¡çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="built_in">print</span>(txt_feats[<span class="number">0</span>].shape)  <span class="comment"># è¾“å‡ºï¼štorch.Size([2, 3])</span></span><br><span class="line"><span class="comment"># å–ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬0ä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾å‘é‡</span></span><br><span class="line"><span class="built_in">print</span>(txt_feats[<span class="number">0</span>, <span class="number">0</span>])     <span class="comment"># è¾“å‡ºï¼štensor([1., 2., 3.])</span></span><br><span class="line"><span class="comment"># å–ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬1ä¸ªæ–‡æœ¬æç¤ºçš„ç¬¬2ä¸ªç‰¹å¾å€¼</span></span><br><span class="line"><span class="built_in">print</span>(txt_feats[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>])  <span class="comment"># è¾“å‡ºï¼štensor(6.)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¼ é‡å½¢çŠ¶ï¼š torch.Size([1, 2, 3])</span><br><span class="line">torch.Size([2, 3])</span><br><span class="line">tensor([1., 2., 3.])</span><br><span class="line">tensor(6.)</span><br></pre></td></tr></table></figure>
<h3 id="ç¤ºä¾‹2ï¼šå½¢çŠ¶ä¸º-2-3-5-çš„æ–‡æœ¬ç‰¹å¾å¼ é‡"><a class="header-anchor" href="#ç¤ºä¾‹2ï¼šå½¢çŠ¶ä¸º-2-3-5-çš„æ–‡æœ¬ç‰¹å¾å¼ é‡">ğŸ”—</a>ç¤ºä¾‹2ï¼šå½¢çŠ¶ä¸º<code>[2, 3, 5]</code>çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</h3>
<h4 id="1-å¼ é‡æ„å»ºï¼ˆå›ºå®šæ•°å€¼-éšæœºç”Ÿæˆï¼‰"><a class="header-anchor" href="#1-å¼ é‡æ„å»ºï¼ˆå›ºå®šæ•°å€¼-éšæœºç”Ÿæˆï¼‰">ğŸ”—</a>1. å¼ é‡æ„å»ºï¼ˆå›ºå®šæ•°å€¼+éšæœºç”Ÿæˆï¼‰</h4>
<p><strong>æ–¹å¼1ï¼šå›ºå®šæ•°å€¼æ„å»º</strong>ï¼ˆä¾¿äºç†è§£å±‚çº§ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="comment"># æ„å»ºå½¢çŠ¶ä¸º[2, 3, 5]çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</span></span><br><span class="line">txt_feats = torch.tensor([</span><br><span class="line">    <span class="comment"># ç¬¬0ä¸ªæ‰¹æ¬¡ï¼š3ä¸ªæ–‡æœ¬æç¤ºï¼Œæ¯ä¸ª5ç»´ç‰¹å¾</span></span><br><span class="line">    [</span><br><span class="line">        [<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>, <span class="number">5.0</span>],</span><br><span class="line">        [<span class="number">6.0</span>, <span class="number">7.0</span>, <span class="number">8.0</span>, <span class="number">9.0</span>, <span class="number">10.0</span>],</span><br><span class="line">        [<span class="number">11.0</span>, <span class="number">12.0</span>, <span class="number">13.0</span>, <span class="number">14.0</span>, <span class="number">15.0</span>]</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># ç¬¬1ä¸ªæ‰¹æ¬¡ï¼š3ä¸ªæ–‡æœ¬æç¤ºï¼Œæ¯ä¸ª5ç»´ç‰¹å¾</span></span><br><span class="line">    [</span><br><span class="line">        [<span class="number">16.0</span>, <span class="number">17.0</span>, <span class="number">18.0</span>, <span class="number">19.0</span>, <span class="number">20.0</span>],</span><br><span class="line">        [<span class="number">21.0</span>, <span class="number">22.0</span>, <span class="number">23.0</span>, <span class="number">24.0</span>, <span class="number">25.0</span>],</span><br><span class="line">        [<span class="number">26.0</span>, <span class="number">27.0</span>, <span class="number">28.0</span>, <span class="number">29.0</span>, <span class="number">30.0</span>]</span><br><span class="line">    ]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¼ é‡å½¢çŠ¶ï¼š&quot;</span>, txt_feats.shape)  <span class="comment"># è¾“å‡ºï¼štorch.Size([2, 3, 5])</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¼ é‡å½¢çŠ¶ï¼š torch.Size([2, 3, 5])</span><br></pre></td></tr></table></figure>
<p><strong>æ–¹å¼2ï¼šéšæœºç”Ÿæˆ</strong>ï¼ˆå®é™…å·¥ç¨‹ä¸­å¸¸ç”¨ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="comment"># ç”Ÿæˆ0~1ä¹‹é—´çš„éšæœºå¼ é‡ï¼Œå½¢çŠ¶[2, 3, 5]</span></span><br><span class="line">txt_feats_rand = torch.rand(<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;éšæœºå¼ é‡å½¢çŠ¶ï¼š&quot;</span>, txt_feats_rand.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;éšæœºå¼ é‡æ•°æ®ï¼š\n&quot;</span>, txt_feats_rand)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">éšæœºå¼ é‡å½¢çŠ¶ï¼š torch.Size([2, 3, 5])</span><br><span class="line">éšæœºå¼ é‡æ•°æ®ï¼š</span><br><span class="line"> tensor([[[0.9234, 0.8287, 0.8474, 0.9677, 0.9566],</span><br><span class="line">         [0.5160, 0.4861, 0.6001, 0.6629, 0.0761],</span><br><span class="line">         [0.2436, 0.5829, 0.4902, 0.1604, 0.8041]],</span><br><span class="line"></span><br><span class="line">        [[0.8065, 0.8809, 0.4194, 0.0084, 0.6315],</span><br><span class="line">         [0.0844, 0.3750, 0.1259, 0.6487, 0.2770],</span><br><span class="line">         [0.9730, 0.9230, 0.2081, 0.6989, 0.8789]]])</span><br></pre></td></tr></table></figure>
<h4 id="2-ç»´åº¦å«ä¹‰ä¸ç´¢å¼•éªŒè¯"><a class="header-anchor" href="#2-ç»´åº¦å«ä¹‰ä¸ç´¢å¼•éªŒè¯">ğŸ”—</a>2. ç»´åº¦å«ä¹‰ä¸ç´¢å¼•éªŒè¯</h4>
<ul>
<li>d0=2ï¼š2ä¸ªæ‰¹æ¬¡ï¼›</li>
<li>d1=3ï¼šæ¯ä¸ªæ‰¹æ¬¡æœ‰3ä¸ªæ–‡æœ¬æç¤ºï¼›</li>
<li>d2=5ï¼šæ¯ä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾æ˜¯5ç»´å‘é‡ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="comment"># ç”Ÿæˆ0~1ä¹‹é—´çš„éšæœºå¼ é‡ï¼Œå½¢çŠ¶[2, 3, 5]</span></span><br><span class="line">txt_feats_rand = torch.rand(<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;éšæœºå¼ é‡å½¢çŠ¶ï¼š&quot;</span>, txt_feats_rand.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;éšæœºå¼ é‡æ•°æ®ï¼š\n&quot;</span>, txt_feats_rand)</span><br><span class="line"><span class="comment"># å–ç¬¬1ä¸ªæ‰¹æ¬¡çš„ç¬¬2ä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾å‘é‡</span></span><br><span class="line"><span class="built_in">print</span>(txt_feats_rand[<span class="number">1</span>, <span class="number">2</span>])  </span><br><span class="line"><span class="comment"># å–ç¬¬0ä¸ªæ‰¹æ¬¡çš„ç¬¬1ä¸ªæ–‡æœ¬æç¤ºçš„ç¬¬3ä¸ªç‰¹å¾å€¼</span></span><br><span class="line"><span class="built_in">print</span>(txt_feats_rand[<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>])  </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">éšæœºå¼ é‡å½¢çŠ¶ï¼š torch.Size([2, 3, 5])</span><br><span class="line">éšæœºå¼ é‡æ•°æ®ï¼š</span><br><span class="line"> tensor([[[0.8058, 0.8785, 0.4751, 0.1679, 0.1906],</span><br><span class="line">         [0.5770, 0.9399, 0.1255, 0.1969, 0.5755],</span><br><span class="line">         [0.0238, 0.7774, 0.1861, 0.5947, 0.9064]],</span><br><span class="line"></span><br><span class="line">        [[0.5544, 0.8176, 0.2461, 0.4795, 0.8786],</span><br><span class="line">         [0.5183, 0.8036, 0.7577, 0.6052, 0.5813],</span><br><span class="line">         [0.7960, 0.1919, 0.8588, 0.2536, 0.4489]]])</span><br><span class="line">tensor([0.7960, 0.1919, 0.8588, 0.2536, 0.4489])</span><br><span class="line">tensor(0.1969)</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€nn-functional-normalizeçš„ä½¿ç”¨ï¼ˆæ–‡æœ¬ç‰¹å¾å½’ä¸€åŒ–ï¼‰"><a class="header-anchor" href="#ä¸‰ã€nn-functional-normalizeçš„ä½¿ç”¨ï¼ˆæ–‡æœ¬ç‰¹å¾å½’ä¸€åŒ–ï¼‰">ğŸ”—</a>ä¸‰ã€nn.functional.normalizeçš„ä½¿ç”¨ï¼ˆæ–‡æœ¬ç‰¹å¾å½’ä¸€åŒ–ï¼‰</h2>
<p>åœ¨æ–‡æœ¬ç‰¹å¾ä¸å›¾åƒç‰¹å¾åŒ¹é…æ—¶ï¼Œéœ€å¯¹æ–‡æœ¬ç‰¹å¾åšå½’ä¸€åŒ–å¤„ç†ï¼Œ<code>nn.functional.normalize</code>æ˜¯PyTorchä¸­å¸¸ç”¨çš„å½’ä¸€åŒ–å‡½æ•°ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nn.functional.normalize(txt_feats, dim=-<span class="number">1</span>, p=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="1-å‡½æ•°åŸå‹ä¸æ ¸å¿ƒå‚æ•°"><a class="header-anchor" href="#1-å‡½æ•°åŸå‹ä¸æ ¸å¿ƒå‚æ•°">ğŸ”—</a>1. å‡½æ•°åŸå‹ä¸æ ¸å¿ƒå‚æ•°</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.nn.functional.normalize(<span class="built_in">input</span>, p=<span class="number">2.0</span>, dim=<span class="number">1</span>, eps=<span class="number">1e-12</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>input</td>
<td>è¾“å…¥çš„å¾…å½’ä¸€åŒ–å¼ é‡</td>
</tr>
<tr>
<td>p</td>
<td>èŒƒæ•°ç±»å‹ï¼ˆé»˜è®¤p=2ï¼Œå³L2èŒƒæ•°ï¼›p=1ä¸ºL1èŒƒæ•°ï¼Œp=âˆä¸ºæ— ç©·èŒƒæ•°ï¼‰</td>
</tr>
<tr>
<td>dim</td>
<td>å½’ä¸€åŒ–çš„ç»´åº¦ï¼ˆæ²¿è¯¥ç»´åº¦è®¡ç®—èŒƒæ•°å¹¶å½’ä¸€åŒ–ï¼‰</td>
</tr>
<tr>
<td>eps</td>
<td>é˜²æ­¢é™¤é›¶é”™è¯¯çš„å¾®å°å€¼ï¼ˆèŒƒæ•°æ¥è¿‘0æ—¶ï¼Œç”¨epsä»£æ›¿åˆ†æ¯ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="2-å…³é”®å‚æ•°ï¼šdim-1ä¸p-2çš„å«ä¹‰"><a class="header-anchor" href="#2-å…³é”®å‚æ•°ï¼šdim-1ä¸p-2çš„å«ä¹‰">ğŸ”—</a>2. å…³é”®å‚æ•°ï¼š<code>dim=-1</code>ä¸<code>p=2</code>çš„å«ä¹‰</h3>
<p>åœ¨ä»£ç  <code>txt_feats = nn.functional.normalize(txt_feats, dim=-1, p=2)</code> ä¸­ï¼š</p>
<ul>
<li><code>p=2</code>ï¼šæŒ‡å®šå½’ä¸€åŒ–ä½¿ç”¨çš„<strong>èŒƒæ•°ç±»å‹</strong>ï¼Œ<code>p=2</code> è¡¨ç¤ºä½¿ç”¨ <strong>L2èŒƒæ•°</strong>ï¼ˆæ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼‰ã€‚<br>
å¯¹äºä¸€ä¸ªå‘é‡ <code>v</code>ï¼Œå…¶L2èŒƒæ•°å®šä¹‰ä¸º <code>||v||â‚‚ = âˆš(vâ‚Â² + vâ‚‚Â² + ... + vâ‚™Â²)</code>ï¼Œå½’ä¸€åŒ–åå‘é‡çš„L2èŒƒæ•°ä¸º1ï¼ˆå³å•ä½å‘é‡ï¼‰ã€‚</li>
<li><code>dim=-1</code>ï¼šæŒ‡å®šå½’ä¸€åŒ–çš„<strong>ç»´åº¦</strong>ï¼Œ<code>dim=-1</code> è¡¨ç¤ºæ²¿ç€å¼ é‡çš„<strong>æœ€åä¸€ä¸ªç»´åº¦</strong>è¿›è¡Œå½’ä¸€åŒ–ã€‚<br>
ä¾‹å¦‚ï¼Œè‹¥ <code>txt_feats</code> çš„å½¢çŠ¶ä¸º <code>(batch_size, num_prompts, prompt_dim)</code>ï¼Œåˆ™ <code>dim=-1</code> å¯¹åº” <code>prompt_dim</code> ç»´åº¦ï¼Œå³å¯¹æ¯ä¸ªâ€œæç¤ºç‰¹å¾å‘é‡â€å•ç‹¬åšL2å½’ä¸€åŒ–ã€‚</li>
</ul>
<h3 id="3-å…·ä½“è®¡ç®—ç¤ºä¾‹"><a class="header-anchor" href="#3-å…·ä½“è®¡ç®—ç¤ºä¾‹">ğŸ”—</a>3. å…·ä½“è®¡ç®—ç¤ºä¾‹</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡è®¾adapterå¤„ç†åçš„txt_featsï¼ˆæœªå½’ä¸€åŒ–ï¼‰</span></span><br><span class="line">txt_feats = torch.tensor([</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>],  <span class="comment"># ç¬¬ä¸€ä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾å‘é‡</span></span><br><span class="line">        [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>]   <span class="comment"># ç¬¬äºŒä¸ªæ–‡æœ¬æç¤ºçš„ç‰¹å¾å‘é‡</span></span><br><span class="line">    ]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;åŸå§‹txt_featså½¢çŠ¶ï¼š&quot;</span>, txt_feats.shape)  <span class="comment"># è¾“å‡ºï¼štorch.Size([1, 2, 3])</span></span><br><span class="line"><span class="comment"># åº”ç”¨å½’ä¸€åŒ–</span></span><br><span class="line">normalized_feats = F.normalize(txt_feats, dim=-<span class="number">1</span>, p=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å½’ä¸€åŒ–åtxt_featsï¼š&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(normalized_feats)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åŸå§‹txt_featså½¢çŠ¶ï¼š torch.Size([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">å½’ä¸€åŒ–åtxt_featsï¼š</span><br><span class="line">tensor([[[<span class="number">0.2673</span>, <span class="number">0.5345</span>, <span class="number">0.8018</span>],</span><br><span class="line">         [<span class="number">0.4558</span>, <span class="number">0.5698</span>, <span class="number">0.6838</span>]]])</span><br></pre></td></tr></table></figure>
<h1 id="ğŸ“ŒList-int-ä¸-Union-List-int-int"><a class="header-anchor" href="#ğŸ“ŒList-int-ä¸-Union-List-int-int">ğŸ”—</a>ğŸ“Œ<code>List[int]</code> ä¸ <code>Union[List[int], int]</code></h1>
<hr>
<h2 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨ç±»å‹æ³¨è§£ï¼Ÿ"><a class="header-anchor" href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨ç±»å‹æ³¨è§£ï¼Ÿ">ğŸ”—</a>ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨ç±»å‹æ³¨è§£ï¼Ÿ</h2>
<p>ç±»å‹æ³¨è§£çš„ä½œç”¨ï¼š</p>
<ul>
<li>âœ… æé«˜ä»£ç <strong>å¯è¯»æ€§</strong></li>
<li>âœ… æ˜ç¡®<strong>å‚æ•°è¯­ä¹‰</strong></li>
<li>âœ… æ–¹ä¾¿ IDE è‡ªåŠ¨è¡¥å…¨ &amp; é™æ€æ£€æŸ¥</li>
<li>âœ… è®©åˆ«äººä¸€çœ¼çœ‹æ‡‚â€œè¿™ä¸ªå‚æ•°è¯¥æ€ä¹ˆä¼ â€</li>
</ul>
<p>âš ï¸ ç±»å‹æ³¨è§£<strong>ä¸å½±å“è¿è¡Œ</strong>ï¼Œä½†æå¤§å½±å“<strong>å·¥ç¨‹è´¨é‡</strong></p>
<hr>
<h2 id="äºŒã€List-int-ç”¨æ³•æ€»ç»“"><a class="header-anchor" href="#äºŒã€List-int-ç”¨æ³•æ€»ç»“">ğŸ”—</a>äºŒã€<code>List[int]</code> ç”¨æ³•æ€»ç»“</h2>
<h3 id="1ï¸âƒ£-å®šä¹‰"><a class="header-anchor" href="#1ï¸âƒ£-å®šä¹‰">ğŸ”—</a>1ï¸âƒ£ å®šä¹‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>[<span class="built_in">int</span>]</span><br></pre></td></tr></table></figure>
<p>å«ä¹‰ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªåˆ—è¡¨ï¼ˆlistï¼‰ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯æ•´æ•°ï¼ˆintï¼‰</p>
</blockquote>
<hr>
<h3 id="2ï¸âƒ£-å¸¸è§ä½¿ç”¨åœºæ™¯"><a class="header-anchor" href="#2ï¸âƒ£-å¸¸è§ä½¿ç”¨åœºæ™¯">ğŸ”—</a>2ï¸âƒ£ å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">in_channels: <span class="type">List</span>[<span class="built_in">int</span>]</span><br></pre></td></tr></table></figure>
<p>è¯­ä¹‰ï¼š</p>
<ul>
<li>å¿…é¡»æ˜¯ <strong>å¤šä¸ªæ•°</strong></li>
<li>æ¯ä¸ªæ•°è¡¨ç¤º <strong>ä¸€ä¸ªç‰¹å¾å±‚çš„é€šé“æ•°</strong></li>
<li>é¡ºåº = ç‰¹å¾å±‚é¡ºåº</li>
</ul>
<hr>
<h3 id="3ï¸âƒ£-ç¤ºä¾‹"><a class="header-anchor" href="#3ï¸âƒ£-ç¤ºä¾‹">ğŸ”—</a>3ï¸âƒ£ ç¤ºä¾‹</h3>
<h4 id="âœ…-æ­£ç¡®"><a class="header-anchor" href="#âœ…-æ­£ç¡®">ğŸ”—</a>âœ… æ­£ç¡®</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">in_channels = [<span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span>]</span><br></pre></td></tr></table></figure>
<h4 id="âŒ-é”™è¯¯"><a class="header-anchor" href="#âŒ-é”™è¯¯">ğŸ”—</a>âŒ é”™è¯¯</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">in_channels = <span class="number">256</span>          <span class="comment"># ä¸æ˜¯åˆ—è¡¨</span></span><br><span class="line">in_channels = [<span class="number">256</span>, <span class="string">&quot;512&quot;</span>] <span class="comment"># å«é int</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="4ï¸âƒ£-è®¾è®¡åŸåˆ™"><a class="header-anchor" href="#4ï¸âƒ£-è®¾è®¡åŸåˆ™">ğŸ”—</a>4ï¸âƒ£ è®¾è®¡åŸåˆ™</h3>
<blockquote>
<p>ğŸ”’ <strong>ç»“æ„æ€§å‚æ•°å¿…é¡»ä¸¥æ ¼æŒ‡å®š</strong></p>
<p>Backbone è¾“å‡ºå‡ å±‚ â†’ å°±å¿…é¡»å†™å‡ ä¸ªæ•°</p>
</blockquote>
<hr>
<h2 id="ä¸‰ã€Union-List-int-int-ç”¨æ³•æ€»ç»“"><a class="header-anchor" href="#ä¸‰ã€Union-List-int-int-ç”¨æ³•æ€»ç»“">ğŸ”—</a>ä¸‰ã€<code>Union[List[int], int]</code> ç”¨æ³•æ€»ç»“</h2>
<h3 id="1ï¸âƒ£-å®šä¹‰-2"><a class="header-anchor" href="#1ï¸âƒ£-å®šä¹‰-2">ğŸ”—</a>1ï¸âƒ£ å®šä¹‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Union</span>[<span class="type">List</span>[<span class="built_in">int</span>], <span class="built_in">int</span>]</span><br></pre></td></tr></table></figure>
<p>å«ä¹‰ï¼š</p>
<blockquote>
<p>å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°
ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°ç»„æˆçš„åˆ—è¡¨</p>
</blockquote>
<hr>
<h3 id="2ï¸âƒ£-å¸¸è§ä½¿ç”¨åœºæ™¯-2"><a class="header-anchor" href="#2ï¸âƒ£-å¸¸è§ä½¿ç”¨åœºæ™¯-2">ğŸ”—</a>2ï¸âƒ£ å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out_channels: <span class="type">Union</span>[<span class="type">List</span>[<span class="built_in">int</span>], <span class="built_in">int</span>]</span><br></pre></td></tr></table></figure>
<p>è¯­ä¹‰ï¼š</p>
<ul>
<li>æ”¯æŒ <strong>ç®€å†™</strong></li>
<li>å…¼é¡¾ <strong>çµæ´»æ€§ &amp; æ˜“ç”¨æ€§</strong></li>
</ul>
<hr>
<h3 id="3ï¸âƒ£-ä¸¤ç§åˆæ³•å†™æ³•"><a class="header-anchor" href="#3ï¸âƒ£-ä¸¤ç§åˆæ³•å†™æ³•">ğŸ”—</a>3ï¸âƒ£ ä¸¤ç§åˆæ³•å†™æ³•</h3>
<h4 id="âœ…-å†™æ³•ä¸€ï¼šé€å±‚æŒ‡å®šï¼ˆç²¾ç»†æ§åˆ¶ï¼‰"><a class="header-anchor" href="#âœ…-å†™æ³•ä¸€ï¼šé€å±‚æŒ‡å®šï¼ˆç²¾ç»†æ§åˆ¶ï¼‰">ğŸ”—</a>âœ… å†™æ³•ä¸€ï¼šé€å±‚æŒ‡å®šï¼ˆç²¾ç»†æ§åˆ¶ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out_channels = [<span class="number">256</span>, <span class="number">256</span>, <span class="number">256</span>]</span><br></pre></td></tr></table></figure>
<p>å«ä¹‰ï¼š</p>
<ul>
<li>æ¯ä¸€å±‚è¾“å‡ºé€šé“æ•°å•ç‹¬æŒ‡å®š</li>
</ul>
<hr>
<h4 id="âœ…-å†™æ³•äºŒï¼šç»Ÿä¸€æŒ‡å®šï¼ˆç®€æ´ï¼‰"><a class="header-anchor" href="#âœ…-å†™æ³•äºŒï¼šç»Ÿä¸€æŒ‡å®šï¼ˆç®€æ´ï¼‰">ğŸ”—</a>âœ… å†™æ³•äºŒï¼šç»Ÿä¸€æŒ‡å®šï¼ˆç®€æ´ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out_channels = <span class="number">256</span></span><br></pre></td></tr></table></figure>
<p>å«ä¹‰ï¼š</p>
<ul>
<li>æ‰€æœ‰è¾“å‡ºå±‚é€šé“æ•°ç›¸åŒ</li>
<li>å†…éƒ¨è‡ªåŠ¨æ‰©å±•ä¸ºï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">256</span>, <span class="number">256</span>, <span class="number">256</span>]</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="4ï¸âƒ£-è®¾è®¡åŸåˆ™-2"><a class="header-anchor" href="#4ï¸âƒ£-è®¾è®¡åŸåˆ™-2">ğŸ”—</a>4ï¸âƒ£ è®¾è®¡åŸåˆ™</h3>
<blockquote>
<p>ğŸ› <strong>æ§åˆ¶æ€§å‚æ•°å…è®¸å·æ‡’</strong></p>
<p>èƒ½è‡ªåŠ¨æ¨æ–­ â†’ å°±å…è®¸ç»Ÿä¸€å†™æ³•</p>
</blockquote>
<hr>
<h2 id="å››ã€in-channels-vs-out-channels-å¯¹æ¯”é€Ÿè®°è¡¨"><a class="header-anchor" href="#å››ã€in-channels-vs-out-channels-å¯¹æ¯”é€Ÿè®°è¡¨">ğŸ”—</a>å››ã€<code>in_channels</code> vs <code>out_channels</code> å¯¹æ¯”é€Ÿè®°è¡¨</h2>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>æ˜¯å¦å…è®¸ int</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_channels</code></td>
<td><code>List[int]</code></td>
<td>âŒ ä¸å…è®¸</td>
<td>å¿…é¡»ç²¾ç¡®åŒ¹é… backbone å¤šå°ºåº¦è¾“å‡º</td>
</tr>
<tr>
<td><code>out_channels</code></td>
<td><code>Union[List[int], int]</code></td>
<td>âœ… å…è®¸</td>
<td>ç»Ÿä¸€ç»´åº¦å¯è‡ªåŠ¨æ‰©å±•</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="äº”ã€å·¥ç¨‹ä¸­çš„çœŸå®è¡Œä¸ºï¼ˆå¾ˆé‡è¦ï¼‰"><a class="header-anchor" href="#äº”ã€å·¥ç¨‹ä¸­çš„çœŸå®è¡Œä¸ºï¼ˆå¾ˆé‡è¦ï¼‰">ğŸ”—</a>äº”ã€å·¥ç¨‹ä¸­çš„çœŸå®è¡Œä¸ºï¼ˆå¾ˆé‡è¦ï¼‰</h2>
<ul>
<li>å³ä½¿ä½ ä¼ çš„æ˜¯ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out_channels = <span class="number">256</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨æ¨¡å‹å†…éƒ¨ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.out_channels == [<span class="number">256</span>, <span class="number">256</span>, <span class="number">256</span>]</span><br></pre></td></tr></table></figure>
<p>âš ï¸ è¿™æ˜¯ç”±<strong>çˆ¶ç±»æ„é€ å‡½æ•°</strong>è‡ªåŠ¨å®Œæˆçš„
ä½ åœ¨å­ç±»ä¸­çœ‹åˆ°çš„æ°¸è¿œæ˜¯ <strong>List[int]</strong></p>
<h1 id="for-in-range-çš„ç”¨æ³•æ€»ç»“"><a class="header-anchor" href="#for-in-range-çš„ç”¨æ³•æ€»ç»“">ğŸ”—</a><code>for ... in range():</code>çš„ç”¨æ³•æ€»ç»“</h1>
<p><code>for ... in range():</code>æ˜¯Pythonä¸­éå¸¸å¸¸ç”¨çš„å¾ªç¯ç»“æ„ï¼Œç”¨äºéå†ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„æ•´æ•°åºåˆ—ã€‚</p>
<h2 id="åŸºæœ¬è¯­æ³•"><a class="header-anchor" href="#åŸºæœ¬è¯­æ³•">ğŸ”—</a>åŸºæœ¬è¯­æ³•</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡ <span class="keyword">in</span> <span class="built_in">range</span>(èµ·å§‹å€¼, ç»“æŸå€¼, æ­¥é•¿):</span><br><span class="line">    <span class="comment"># å¾ªç¯ä½“ä»£ç </span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>èµ·å§‹å€¼(start)</strong>ï¼šåºåˆ—çš„èµ·å§‹å€¼ï¼ˆé»˜è®¤ä¸º0ï¼‰</li>
<li><strong>ç»“æŸå€¼(stop)</strong>ï¼šåºåˆ—çš„ç»“æŸå€¼ï¼ˆ<strong>ä¸åŒ…å«</strong>è¯¥å€¼ï¼‰</li>
<li><strong>æ­¥é•¿(step)</strong>ï¼šåºåˆ—ä¸­ç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®å€¼ï¼ˆé»˜è®¤ä¸º1ï¼Œå¯ä¸ºè´Ÿæ•°ï¼‰</li>
</ul>
<h2 id="å¸¸è§ç”¨æ³•ç¤ºä¾‹"><a class="header-anchor" href="#å¸¸è§ç”¨æ³•ç¤ºä¾‹">ğŸ”—</a>å¸¸è§ç”¨æ³•ç¤ºä¾‹</h2>
<h3 id="1-åŸºæœ¬ç”¨æ³•ï¼ˆé»˜è®¤å‚æ•°ï¼‰"><a class="header-anchor" href="#1-åŸºæœ¬ç”¨æ³•ï¼ˆé»˜è®¤å‚æ•°ï¼‰">ğŸ”—</a>1. åŸºæœ¬ç”¨æ³•ï¼ˆé»˜è®¤å‚æ•°ï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š<code>0 1 2 3 4</code></p>
<ul>
<li>ç­‰ä»·äº <code>range(0, 5, 1)</code></li>
</ul>
<h3 id="2-æŒ‡å®šèµ·å§‹å€¼å’Œç»“æŸå€¼"><a class="header-anchor" href="#2-æŒ‡å®šèµ·å§‹å€¼å’Œç»“æŸå€¼">ğŸ”—</a>2. æŒ‡å®šèµ·å§‹å€¼å’Œç»“æŸå€¼</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">6</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š<code>2 3 4 5</code></p>
<ul>
<li>åŒ…å«èµ·å§‹å€¼2ï¼Œä¸åŒ…å«ç»“æŸå€¼6</li>
</ul>
<h3 id="3-æŒ‡å®šæ­¥é•¿"><a class="header-anchor" href="#3-æŒ‡å®šæ­¥é•¿">ğŸ”—</a>3. æŒ‡å®šæ­¥é•¿</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š<code>0 2 4 6 8</code></p>
<ul>
<li>æ­¥é•¿ä¸º2ï¼Œç”Ÿæˆå¶æ•°åºåˆ—</li>
</ul>
<h3 id="4-è´Ÿæ•°æ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰"><a class="header-anchor" href="#4-è´Ÿæ•°æ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰">ğŸ”—</a>4. è´Ÿæ•°æ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>, <span class="number">0</span>, -<span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š<code>10 8 6 4 2</code></p>
<ul>
<li>ä»10å¼€å§‹ï¼Œæ¯æ¬¡å‡2ï¼Œç›´åˆ°0ï¼ˆä¸åŒ…æ‹¬0ï¼‰</li>
</ul>
<h2 id="ç‰¹ç‚¹"><a class="header-anchor" href="#ç‰¹ç‚¹">ğŸ”—</a>ç‰¹ç‚¹</h2>
<ol>
<li><strong>å·¦é—­å³å¼€</strong>ï¼š<code>range(start, stop, step)</code> ç”Ÿæˆçš„åºåˆ—æ˜¯ <code>[start, stop)</code> åŒºé—´</li>
<li><strong>æ”¯æŒè´Ÿæ•°</strong>ï¼š<code>start</code>ã€<code>stop</code>ã€<code>step</code> éƒ½å¯ä»¥æ˜¯è´Ÿæ•°</li>
<li><strong>ç”Ÿæˆè¿­ä»£å¯¹è±¡</strong>ï¼š<code>range()</code> ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªä¸å¯å˜çš„åºåˆ—ï¼Œä¸æ˜¯åˆ—è¡¨
<ul>
<li>å¯ä»¥ç”¨ <code>list(range(...))</code> è½¬æ¢ä¸ºåˆ—è¡¨</li>
</ul>
</li>
</ol>
<h2 id="å®ç”¨åœºæ™¯"><a class="header-anchor" href="#å®ç”¨åœºæ™¯">ğŸ”—</a>å®ç”¨åœºæ™¯</h2>
<h3 id="1-éå†åˆ—è¡¨ç´¢å¼•"><a class="header-anchor" href="#1-éå†åˆ—è¡¨ç´¢å¼•">ğŸ”—</a>1. éå†åˆ—è¡¨ç´¢å¼•</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fruits = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(fruits)):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Index <span class="subst">&#123;i&#125;</span>: <span class="subst">&#123;fruits[i]&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Index 0: apple</span><br><span class="line">Index 1: banana</span><br><span class="line">Index 2: orange</span><br></pre></td></tr></table></figure>
<h3 id="2-è®¡ç®—å›ºå®šæ¬¡æ•°çš„å¾ªç¯"><a class="header-anchor" href="#2-è®¡ç®—å›ºå®šæ¬¡æ•°çš„å¾ªç¯">ğŸ”—</a>2. è®¡ç®—å›ºå®šæ¬¡æ•°çš„å¾ªç¯</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-ç”Ÿæˆç‰¹å®šåºåˆ—"><a class="header-anchor" href="#3-ç”Ÿæˆç‰¹å®šåºåˆ—">ğŸ”—</a>3. ç”Ÿæˆç‰¹å®šåºåˆ—</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆ1-10çš„å¥‡æ•°</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<h3 id="4-é€†åºéå†"><a class="header-anchor" href="#4-é€†åºéå†">ğŸ”—</a>4. é€†åºéå†</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»10åˆ°1çš„é€’å‡åºåˆ—</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹">ğŸ”—</a>æ³¨æ„äº‹é¡¹</h2>
<ul>
<li>å¾ªç¯å˜é‡ï¼ˆå¦‚<code>i</code>ï¼‰çš„å€¼ç”±å¾ªç¯è‡ªåŠ¨æ§åˆ¶ï¼Œä¸å»ºè®®åœ¨å¾ªç¯å†…éƒ¨é‡æ–°èµ‹å€¼</li>
<li><code>range()</code> ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªè¿­ä»£å¯¹è±¡ï¼Œä¸æ˜¯åˆ—è¡¨ï¼ŒèŠ‚çœå†…å­˜</li>
<li>å½“éœ€è¦éå†å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å­—ç¬¦ä¸²ï¼‰æ—¶ï¼Œç›´æ¥ä½¿ç”¨ <code>for item in iterable</code> æ›´ç®€æ´</li>
</ul>
<h2 id="ä¸ºä»€ä¹ˆç”¨range-ï¼Ÿ"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆç”¨range-ï¼Ÿ">ğŸ”—</a>ä¸ºä»€ä¹ˆç”¨<code>range()</code>ï¼Ÿ</h2>
<p>å½“ä½ éœ€è¦éå†ä¸€ä¸ªå›ºå®šæ¬¡æ•°çš„åºåˆ—ï¼Œæˆ–è€…éœ€è¦æ§åˆ¶ç´¢å¼•æ—¶ï¼Œ<code>range()</code> æ˜¯éå¸¸å®ç”¨çš„å·¥å…·ã€‚ä¾‹å¦‚ï¼Œå½“ä½ éœ€è¦æ ¹æ®åˆ—è¡¨é•¿åº¦æ¥éå†ç´¢å¼•ï¼Œè€Œä¸æ˜¯ç›´æ¥éå†å…ƒç´ æœ¬èº«æ—¶ï¼Œ<code>range(len(list))</code> å°±éå¸¸æ–¹ä¾¿ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªæ€»ç»“å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ æœ‰ä»»ä½•å…·ä½“é—®é¢˜æˆ–éœ€è¦æ›´å¤šç¤ºä¾‹ï¼Œéšæ—¶å‘Šè¯‰æˆ‘å“¦~ ğŸ˜Š</p>
<h1 id="nn-ModuleList"><a class="header-anchor" href="#nn-ModuleList">ğŸ”—</a>nn.ModuleList</h1>
<h2 id="é€šä¹‰çš„å›ç­”"><a class="header-anchor" href="#é€šä¹‰çš„å›ç­”">ğŸ”—</a>é€šä¹‰çš„å›ç­”</h2>
<p><code>nn.ModuleList</code> æ˜¯ PyTorch ä¸­ç”¨äºç®¡ç†å¤šä¸ªå­æ¨¡å—ï¼ˆsubmodulesï¼‰çš„ä¸€ç§å®¹å™¨ç±»ï¼Œå®ƒç»§æ‰¿è‡ª <code>nn.Module</code>ã€‚åœ¨ä½ æä¾›çš„ä»£ç ä¸­ï¼Œ<code>_init_layers</code> æ–¹æ³•ä½¿ç”¨äº† <code>nn.ModuleList()</code> æ¥ç»„ç»‡ YOLO-World æ£€æµ‹å¤´ä¸­çš„ä¸‰ç±»å­ç½‘ç»œï¼š</p>
<ul>
<li><code>self.cls_preds</code>ï¼šç”¨äºåˆ†ç±»ç‰¹å¾çš„é¢„æµ‹åˆ†æ”¯ï¼›</li>
<li><code>self.reg_preds</code>ï¼šç”¨äºè¾¹ç•Œæ¡†å›å½’çš„é¢„æµ‹åˆ†æ”¯ï¼›</li>
<li><code>self.cls_contrasts</code>ï¼šç”¨äºå›¾æ–‡å¯¹æ¯”å­¦ä¹ çš„åˆ†ç±»æ‰“åˆ†æ¨¡å—ã€‚</li>
</ul>
<hr>
<h3 id="ä¸€ã€nn-ModuleList-çš„æ ¸å¿ƒåŠŸèƒ½"><a class="header-anchor" href="#ä¸€ã€nn-ModuleList-çš„æ ¸å¿ƒåŠŸèƒ½">ğŸ”—</a>ä¸€ã€<code>nn.ModuleList</code> çš„æ ¸å¿ƒåŠŸèƒ½</h3>
<h4 id="âœ…-1-è‡ªåŠ¨æ³¨å†Œå­æ¨¡å—"><a class="header-anchor" href="#âœ…-1-è‡ªåŠ¨æ³¨å†Œå­æ¨¡å—">ğŸ”—</a>âœ… 1. <strong>è‡ªåŠ¨æ³¨å†Œå­æ¨¡å—</strong></h4>
<p>å½“ä½ æŠŠä¸€ä¸ª <code>nn.Module</code>ï¼ˆæ¯”å¦‚ <code>Conv2d</code>ã€<code>Linear</code> æˆ–è‡ªå®šä¹‰æ¨¡å—ï¼‰æ·»åŠ åˆ° <code>nn.ModuleList</code> ä¸­æ—¶ï¼ŒPyTorch ä¼š<strong>è‡ªåŠ¨å°†å…¶æ³¨å†Œä¸ºå½“å‰æ¨¡å‹çš„ä¸€éƒ¨åˆ†</strong>ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>è°ƒç”¨ <code>.parameters()</code> æ—¶ï¼Œè¿™äº›å­æ¨¡å—çš„å‚æ•°ä¼šè¢«åŒ…å«è¿›æ¥ï¼›</li>
<li>è°ƒç”¨ <code>.to(device)</code> æ—¶ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«ç§»åŠ¨åˆ°å¯¹åº”è®¾å¤‡ï¼›</li>
<li>ä¿å­˜/åŠ è½½æ¨¡å‹ï¼ˆ<code>.state_dict()</code>ï¼‰æ—¶ï¼Œå®ƒä»¬çš„çŠ¶æ€ä¼šè¢«æ­£ç¡®å¤„ç†ã€‚</li>
</ul>
<blockquote>
<p>å¦‚æœä½ ç”¨æ™®é€šçš„ Python åˆ—è¡¨ï¼ˆå¦‚ <code>self.layers = []</code>ï¼‰ï¼Œè¿™äº›åŠŸèƒ½å°†<strong>ä¸ä¼šç”Ÿæ•ˆ</strong>ï¼</p>
</blockquote>
<h4 id="âœ…-2-æ”¯æŒç´¢å¼•ã€è¿­ä»£ã€len-ç­‰æ“ä½œ"><a class="header-anchor" href="#âœ…-2-æ”¯æŒç´¢å¼•ã€è¿­ä»£ã€len-ç­‰æ“ä½œ">ğŸ”—</a>âœ… 2. <strong>æ”¯æŒç´¢å¼•ã€è¿­ä»£ã€len() ç­‰æ“ä½œ</strong></h4>
<p><code>nn.ModuleList</code> è¡Œä¸ºç±»ä¼¼ Python çš„ <code>list</code>ï¼Œä½†ä¸“ä¸ºç¥ç»ç½‘ç»œæ¨¡å—è®¾è®¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> layer <span class="keyword">in</span> <span class="variable language_">self</span>.cls_preds:</span><br><span class="line">    x = layer(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">x = <span class="variable language_">self</span>.cls_preds[<span class="number">0</span>](x)</span><br></pre></td></tr></table></figure>
<h4 id="âœ…-3-ä¸-nn-Sequential-çš„åŒºåˆ«"><a class="header-anchor" href="#âœ…-3-ä¸-nn-Sequential-çš„åŒºåˆ«">ğŸ”—</a>âœ… 3. <strong>ä¸ <code>nn.Sequential</code> çš„åŒºåˆ«</strong></h4>
<ul>
<li><code>nn.Sequential</code> æ˜¯<strong>æŒ‰é¡ºåºæ‰§è¡Œ</strong>çš„å›ºå®šæµç¨‹ï¼ˆåƒå‡½æ•°ç®¡é“ï¼‰ï¼›</li>
<li><code>nn.ModuleList</code> åªæ˜¯<strong>å­˜å‚¨æ¨¡å—çš„åˆ—è¡¨</strong>ï¼Œä¸å®šä¹‰æ‰§è¡Œé€»è¾‘â€”â€”ä½ éœ€è¦è‡ªå·±å†™å‰å‘ä¼ æ’­é€»è¾‘ï¼ˆå¦‚ä½ çš„ <code>forward_single</code> ä¸­é‚£æ ·ï¼‰ã€‚</li>
</ul>
<hr>
<h3 id="äºŒã€ç»“åˆä»£ç åˆ†æ"><a class="header-anchor" href="#äºŒã€ç»“åˆä»£ç åˆ†æ">ğŸ”—</a>äºŒã€ç»“åˆä»£ç åˆ†æ</h3>
<p>åœ¨ <code>_init_layers</code> ä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.cls_preds = nn.ModuleList()</span><br><span class="line"><span class="variable language_">self</span>.reg_preds = nn.ModuleList()</span><br><span class="line"><span class="variable language_">self</span>.cls_contrasts = nn.ModuleList()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.num_levels):  <span class="comment"># å¤šå°ºåº¦ç‰¹å¾å›¾ï¼ˆå¦‚ P3, P4, P5ï¼‰</span></span><br><span class="line">    <span class="variable language_">self</span>.cls_preds.append( ... )        <span class="comment"># æ·»åŠ ä¸€ä¸ªåˆ†ç±»é¢„æµ‹å¤´</span></span><br><span class="line">    <span class="variable language_">self</span>.reg_preds.append( ... )        <span class="comment"># æ·»åŠ ä¸€ä¸ªå›å½’é¢„æµ‹å¤´</span></span><br><span class="line">    <span class="variable language_">self</span>.cls_contrasts.append( ... )    <span class="comment"># æ·»åŠ ä¸€ä¸ªå¯¹æ¯”å­¦ä¹ æ‰“åˆ†æ¨¡å—</span></span><br></pre></td></tr></table></figure>
<p>è¿™è¯´æ˜ YOLO-World åœ¨ <strong>æ¯ä¸ªç‰¹å¾å±‚çº§ï¼ˆFPN levelï¼‰</strong> ä¸Šéƒ½æœ‰ç‹¬ç«‹çš„ä¸€å¥—é¢„æµ‹å¤´ã€‚ç”±äºä¸åŒå±‚çº§çš„è¾“å…¥é€šé“æ•°å¯èƒ½ä¸åŒï¼Œä¸èƒ½å…±äº«åŒä¸€å¥—å·ç§¯å±‚ï¼Œå› æ­¤éœ€è¦ä¸ºæ¯ä¸€å±‚åˆ›å»ºç‹¬ç«‹æ¨¡å—ï¼Œå¹¶ç”¨ <code>ModuleList</code> ç®¡ç†ã€‚</p>
<p>ç„¶ååœ¨ <code>forward</code> ä¸­é€šè¿‡ <code>multi_apply</code> å¹¶è¡Œå¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> multi_apply(<span class="variable language_">self</span>.forward_single, img_feats, txt_feats, txt_masks, </span><br><span class="line">                   <span class="variable language_">self</span>.cls_preds, <span class="variable language_">self</span>.reg_preds, <span class="variable language_">self</span>.cls_contrasts)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ <code>multi_apply</code> ä¼šæŠŠ <code>img_feats[i]</code>ã€<code>txt_feats[i]</code> å’Œ <code>self.cls_preds[i]</code> ç­‰é…å¯¹ä¼ ç»™ <code>forward_single</code>ï¼Œå®ç°å¤šå°ºåº¦å¹¶è¡Œæ¨ç†ã€‚</p>
<hr>
<h3 id="ä¸‰ã€ä¸ºä»€ä¹ˆä¸ç”¨æ™®é€š-listï¼Ÿ"><a class="header-anchor" href="#ä¸‰ã€ä¸ºä»€ä¹ˆä¸ç”¨æ™®é€š-listï¼Ÿ">ğŸ”—</a>ä¸‰ã€ä¸ºä»€ä¹ˆä¸ç”¨æ™®é€š listï¼Ÿ</h3>
<p>å¦‚æœå†™æˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.cls_preds = []  <span class="comment"># âŒ é”™è¯¯ï¼</span></span><br><span class="line"><span class="variable language_">self</span>.cls_preds.append(nn.Conv2d(...))</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè¿™ä¸ª <code>Conv2d</code> <strong>ä¸ä¼šè¢«æ³¨å†Œåˆ°æ¨¡å‹ä¸­</strong>ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>è®­ç»ƒæ—¶å‚æ•°ä¸æ›´æ–°ï¼›</li>
<li>æ¨¡å‹ä¿å­˜æ—¶ä¸¢å¤±è¯¥å±‚ï¼›</li>
<li><code>.cuda()</code> ä¸ä¼šæŠŠå®ƒç§»åˆ° GPUã€‚</li>
</ul>
<p>è€Œ <code>nn.ModuleList</code> è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<hr>
<h3 id="å››ã€æ€»ç»“"><a class="header-anchor" href="#å››ã€æ€»ç»“">ğŸ”—</a>å››ã€æ€»ç»“</h3>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>nn.ModuleList</code></th>
<th>æ™®é€š <code>list</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>è‡ªåŠ¨æ³¨å†Œå‚æ•°</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦</td>
</tr>
<tr>
<td>æ”¯æŒ <code>.to()</code>, <code>.train()</code> ç­‰</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦</td>
</tr>
<tr>
<td>å¯è¿­ä»£ã€ç´¢å¼•</td>
<td>âœ… æ˜¯</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td>å®šä¹‰å‰å‘é€»è¾‘</td>
<td>âŒ éœ€æ‰‹åŠ¨å†™</td>
<td>âŒ éœ€æ‰‹åŠ¨å†™</td>
</tr>
<tr>
<td>é€‚ç”¨äºåŠ¨æ€ç»“æ„</td>
<td>âœ… æ˜¯ï¼ˆå¦‚å¤šå°ºåº¦å¤´ï¼‰</td>
<td>âš ï¸ æœ‰é£é™©</td>
</tr>
</tbody>
</table>
<blockquote>
<p>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šå½“ä½ éœ€è¦åœ¨ä¸€ä¸ª <code>nn.Module</code> ä¸­ç®¡ç†<strong>å¤šä¸ªå¯å­¦ä¹ çš„å­æ¨¡å—</strong>ï¼Œä¸”å®ƒä»¬<strong>ä¸æ˜¯ä¸¥æ ¼ä¸²è¡Œæ‰§è¡Œ</strong>æ—¶ï¼Œè¯·ä½¿ç”¨ <code>nn.ModuleList</code>ã€‚</p>
</blockquote>
<hr>
<p>å¦‚æœ‰å…´è¶£ï¼Œä¹Ÿå¯ä»¥äº†è§£å®ƒçš„â€œå…„å¼Ÿâ€ï¼š</p>
<ul>
<li><code>nn.ParameterList</code>ï¼šç®¡ç†å‚æ•°ï¼ˆéæ¨¡å—ï¼‰ï¼›</li>
<li><code>nn.ModuleDict</code>ï¼šç”¨å­—å…¸å½¢å¼ç®¡ç†æ¨¡å—ï¼ˆå¦‚ <code>&#123;'backbone': ..., 'head': ...&#125;</code>ï¼‰ã€‚</li>
</ul>
<h2 id="è±†åŒ…çš„å›ç­”"><a class="header-anchor" href="#è±†åŒ…çš„å›ç­”">ğŸ”—</a>è±†åŒ…çš„å›ç­”</h2>
<p>åœ¨PyTorchä¸­ï¼Œ<code>nn.ModuleList</code>æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºç®¡ç†å¤šä¸ª<code>nn.Module</code>å®ä¾‹çš„å®¹å™¨ç±»ï¼Œä¸»è¦ç”¨äº<strong>ç»„ç»‡å’Œæ‰¹é‡ç®¡ç†å­æ¨¡å—</strong>ï¼Œç¡®ä¿è¿™äº›å­æ¨¡å—èƒ½è¢«PyTorchè‡ªåŠ¨è¿½è¸ªï¼ˆå¦‚å‚æ•°æ›´æ–°ã€æ¨¡å‹ä¿å­˜/åŠ è½½ç­‰ï¼‰ã€‚</p>
<hr>
<h3 id="æ ¸å¿ƒåŠŸèƒ½"><a class="header-anchor" href="#æ ¸å¿ƒåŠŸèƒ½">ğŸ”—</a>æ ¸å¿ƒåŠŸèƒ½</h3>
<ol>
<li><strong>å­æ¨¡å—æ³¨å†Œ</strong>ï¼š<code>nn.ModuleList</code>ä¼šè‡ªåŠ¨å°†å…¶ä¸­çš„å­æ¨¡å—æ³¨å†Œåˆ°çˆ¶æ¨¡å—ä¸­ï¼Œä½¿å¾—å­æ¨¡å—çš„å‚æ•°è¢«çº³å…¥çˆ¶æ¨¡å—çš„å‚æ•°ç®¡ç†ä½“ç³»ï¼ˆå³èƒ½é€šè¿‡<code>model.parameters()</code>è·å–ï¼‰ï¼Œç¡®ä¿åå‘ä¼ æ’­æ—¶å‚æ•°èƒ½è¢«æ­£ç¡®æ›´æ–°ã€‚</li>
<li><strong>æœ‰åºå­˜å‚¨</strong>ï¼šåƒPythonåˆ—è¡¨ä¸€æ ·æŒ‰é¡ºåºå­˜å‚¨å­æ¨¡å—ï¼Œæ”¯æŒç´¢å¼•è®¿é—®ã€è¿­ä»£ç­‰åˆ—è¡¨æ“ä½œï¼Œæ–¹ä¾¿æ‰¹é‡å¤„ç†å¤šä¸ªåŒç±»å‹æ¨¡å—ã€‚</li>
<li><strong>åŠ¨æ€æ‰©å±•</strong>ï¼šæ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤å­æ¨¡å—ï¼ˆå¦‚<code>append</code>/<code>pop</code>ï¼‰ï¼Œçµæ´»æ€§é«˜ã€‚</li>
</ol>
<h3 id="ä¸æ™®é€šPythonåˆ—è¡¨çš„åŒºåˆ«"><a class="header-anchor" href="#ä¸æ™®é€šPythonåˆ—è¡¨çš„åŒºåˆ«">ğŸ”—</a>ä¸æ™®é€šPythonåˆ—è¡¨çš„åŒºåˆ«</h3>
<ul>
<li>æ™®é€šPythonåˆ—è¡¨ä¸­çš„å­æ¨¡å—<strong>ä¸ä¼šè¢«PyTorchè‡ªåŠ¨è¯†åˆ«</strong>ï¼Œå…¶å‚æ•°ä¸ä¼šè¢«çº³å…¥çˆ¶æ¨¡å—çš„å‚æ•°ç®¡ç†ï¼Œå¯¼è‡´æ— æ³•å‚ä¸è®­ç»ƒï¼ˆåå‘ä¼ æ’­æ—¶å‚æ•°ä¸æ›´æ–°ï¼‰ã€‚</li>
<li><code>nn.ModuleList</code>ä¸­çš„å­æ¨¡å—ä¼šè¢«è‡ªåŠ¨æ³¨å†Œï¼Œå‚æ•°ä¼šè¢«æ­£ç¡®è¿½è¸ªï¼Œæ˜¯PyTorchæ¨èçš„å­æ¨¡å—ç®¡ç†æ–¹å¼ã€‚</li>
</ul>
<h3 id="ä»£ç ä¸­çš„å…·ä½“åº”ç”¨"><a class="header-anchor" href="#ä»£ç ä¸­çš„å…·ä½“åº”ç”¨">ğŸ”—</a>ä»£ç ä¸­çš„å…·ä½“åº”ç”¨</h3>
<p>åœ¨æä¾›çš„<code>_init_layers</code>æ–¹æ³•ä¸­ï¼Œ<code>nn.ModuleList</code>è¢«ç”¨æ¥ç®¡ç†ä¸åŒå±‚çº§çš„ç½‘ç»œæ¨¡å—ï¼Œä»¥é€‚é…å¤šå°ºåº¦ç‰¹å¾å›¾çš„å¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.cls_preds = nn.ModuleList()  <span class="comment"># å­˜å‚¨å„å±‚çº§çš„åˆ†ç±»é¢„æµ‹å™¨</span></span><br><span class="line"><span class="variable language_">self</span>.reg_preds = nn.ModuleList()  <span class="comment"># å­˜å‚¨å„å±‚çº§çš„å›å½’é¢„æµ‹å™¨</span></span><br><span class="line"><span class="variable language_">self</span>.cls_contrasts = nn.ModuleList()  <span class="comment"># å­˜å‚¨å„å±‚çº§çš„å¯¹æ¯”å­¦ä¹ å¤´</span></span><br></pre></td></tr></table></figure>
<h4 id="å…·ä½“ç”¨æ³•è§£æï¼š"><a class="header-anchor" href="#å…·ä½“ç”¨æ³•è§£æï¼š">ğŸ”—</a>å…·ä½“ç”¨æ³•è§£æï¼š</h4>
<ol>
<li>
<p><strong>åˆå§‹åŒ–å®¹å™¨</strong>ï¼šå…ˆåˆ›å»º3ä¸ª<code>nn.ModuleList</code>å®ä¾‹ï¼Œåˆ†åˆ«ç”¨äºç®¡ç†åˆ†ç±»é¢„æµ‹å™¨ã€å›å½’é¢„æµ‹å™¨å’Œå¯¹æ¯”å¤´ã€‚</p>
</li>
<li>
<p><strong>åŠ¨æ€æ·»åŠ å­æ¨¡å—</strong>ï¼šé€šè¿‡å¾ªç¯ä¸ºæ¯ä¸ªç‰¹å¾å±‚çº§ï¼ˆ<code>range(self.num_levels)</code>ï¼‰åˆ›å»ºå¯¹åº”çš„å­æ¨¡å—ï¼Œå¹¶æ·»åŠ åˆ°<code>ModuleList</code>ä¸­ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.num_levels):</span><br><span class="line">    <span class="comment"># ä¸ºæ¯ä¸ªå±‚çº§åˆ›å»ºå›å½’é¢„æµ‹å™¨ï¼ˆç”±å·ç§¯å±‚ç»„æˆï¼‰ï¼Œå¹¶æ·»åŠ åˆ°reg_preds</span></span><br><span class="line">    <span class="variable language_">self</span>.reg_preds.append(</span><br><span class="line">        nn.Sequential(</span><br><span class="line">            ConvModule(...),  <span class="comment"># å·ç§¯+å½’ä¸€åŒ–+æ¿€æ´»</span></span><br><span class="line">            ConvModule(...),</span><br><span class="line">            nn.Conv2d(...)   <span class="comment"># è¾“å‡ºå›å½’ç»“æœ</span></span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># åŒç†ä¸ºæ¯ä¸ªå±‚çº§åˆ›å»ºåˆ†ç±»é¢„æµ‹å™¨ï¼Œæ·»åŠ åˆ°cls_preds</span></span><br><span class="line">    <span class="variable language_">self</span>.cls_preds.append(...)</span><br><span class="line">    <span class="comment"># ä¸ºæ¯ä¸ªå±‚çº§åˆ›å»ºå¯¹æ¯”å¤´ï¼Œæ·»åŠ åˆ°cls_contrasts</span></span><br><span class="line">    <span class="variable language_">self</span>.cls_contrasts.append(...)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>forwardä¸­æ‰¹é‡è°ƒç”¨</strong>ï¼šåœ¨æ¨¡å‹å‰å‘ä¼ æ’­æ—¶ï¼Œå¯é€šè¿‡å¾ªç¯éå†<code>ModuleList</code>ï¼Œä¸ºæ¯ä¸ªå±‚çº§çš„ç‰¹å¾å›¾åº”ç”¨å¯¹åº”çš„å­æ¨¡å—ã€‚ä¾‹å¦‚åœ¨<code>forward_single</code>ä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹å½“å‰å±‚çº§çš„ç‰¹å¾å›¾åº”ç”¨å¯¹åº”çš„åˆ†ç±»é¢„æµ‹å™¨å’Œå¯¹æ¯”å¤´</span></span><br><span class="line">cls_embed = cls_pred(img_feat)  <span class="comment"># cls_predæ˜¯cls_predsä¸­çš„ä¸€ä¸ªå­æ¨¡å—</span></span><br><span class="line">cls_logit = cls_contrast(cls_embed, txt_feat)  <span class="comment"># cls_contrastæ˜¯cls_contrastsä¸­çš„å­æ¨¡å—</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="å¸¸ç”¨æ“ä½œ"><a class="header-anchor" href="#å¸¸ç”¨æ“ä½œ">ğŸ”—</a>å¸¸ç”¨æ“ä½œ</h3>
<ul>
<li><strong>ç´¢å¼•è®¿é—®</strong>ï¼š<code>self.cls_preds[i]</code>è·å–ç¬¬<code>i</code>ä¸ªå±‚çº§çš„åˆ†ç±»é¢„æµ‹å™¨ã€‚</li>
<li><strong>è¿­ä»£éå†</strong>ï¼š<code>for cls_pred in self.cls_preds: ...</code> æ‰¹é‡å¤„ç†æ‰€æœ‰å­æ¨¡å—ã€‚</li>
<li><strong>æ·»åŠ æ¨¡å—</strong>ï¼š<code>self.cls_preds.append(new_module)</code> åŠ¨æ€æ·»åŠ æ–°æ¨¡å—ã€‚</li>
<li><strong>é•¿åº¦è·å–</strong>ï¼š<code>len(self.cls_preds)</code> è·å–å­æ¨¡å—æ•°é‡ï¼ˆå³ç‰¹å¾å±‚çº§æ•°ï¼‰ã€‚</li>
</ul>
<p>æ€»ç»“ï¼š<code>nn.ModuleList</code>æ˜¯PyTorchä¸­ç®¡ç†å¤šå­æ¨¡å—çš„æ ¸å¿ƒå·¥å…·ï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤šå°ºåº¦ã€å¤šåˆ†æ”¯çš„ç½‘ç»œç»“æ„ï¼ˆå¦‚YOLOç³»åˆ—çš„å¤šå±‚çº§æ£€æµ‹å¤´ï¼‰ï¼Œæ—¢ä¿è¯äº†å­æ¨¡å—çš„æ­£ç¡®ç®¡ç†ï¼Œåˆç®€åŒ–äº†æ‰¹é‡æ“ä½œçš„ä»£ç é€»è¾‘ã€‚</p>
<h1 id="torch-arrange"><a class="header-anchor" href="#torch-arrange">ğŸ”—</a>torch.arrange</h1>
<p><code>torch.arange</code> æ˜¯ PyTorch ä¸­ç”¨äºåˆ›å»º<strong>ç­‰å·®æ•´æ•°åºåˆ—å¼ é‡</strong>çš„å¸¸ç”¨å‡½æ•°ï¼Œç±»ä¼¼äº NumPy ä¸­çš„ <code>np.arange</code>ã€‚å®ƒè¿”å›ä¸€ä¸ªä¸€ç»´å¼ é‡ï¼Œå…ƒç´ ä»èµ·å§‹å€¼ï¼ˆstartï¼‰å¼€å§‹ï¼Œä»¥å›ºå®šæ­¥é•¿ï¼ˆstepï¼‰é€’å¢ï¼Œç›´åˆ°ä½†ä¸åŒ…æ‹¬ç»“æŸå€¼ï¼ˆendï¼‰ã€‚</p>
<hr>
<h3 id="ğŸ”§-åŸºæœ¬è¯­æ³•"><a class="header-anchor" href="#ğŸ”§-åŸºæœ¬è¯­æ³•">ğŸ”—</a>ğŸ”§ åŸºæœ¬è¯­æ³•</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(end, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">torch.arange(start, end, step=<span class="number">1</span>, *, dtype=<span class="literal">None</span>, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>start</code></strong>ï¼ˆå¯é€‰ï¼‰ï¼šèµ·å§‹å€¼ï¼Œé»˜è®¤ä¸º <code>0</code>ã€‚</li>
<li><strong><code>end</code></strong>ï¼ˆå¿…å¡«ï¼‰ï¼šç»“æŸå€¼ï¼ˆ<strong>ä¸åŒ…å«</strong>åœ¨ç»“æœä¸­ï¼‰ã€‚</li>
<li><strong><code>step</code></strong>ï¼ˆå¯é€‰ï¼‰ï¼šæ­¥é•¿ï¼Œé»˜è®¤ä¸º <code>1</code>ã€‚</li>
<li><strong><code>dtype</code></strong>ï¼šè¾“å‡ºå¼ é‡çš„æ•°æ®ç±»å‹ï¼ˆå¦‚ <code>torch.float32</code>, <code>torch.int64</code> ç­‰ï¼‰ã€‚</li>
<li><strong><code>device</code></strong>ï¼šå¼ é‡æ‰€åœ¨çš„è®¾å¤‡ï¼ˆå¦‚ <code>'cpu'</code> æˆ– <code>'cuda'</code>ï¼‰ã€‚</li>
<li><strong><code>requires_grad</code></strong>ï¼šæ˜¯å¦éœ€è¦è®¡ç®—æ¢¯åº¦ï¼ˆç”¨äºè‡ªåŠ¨å¾®åˆ†ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>start</code>, <code>end</code>, <code>step</code> å¿…é¡»æ˜¯æ ‡é‡ï¼ˆscalarï¼‰ï¼Œä¸èƒ½æ˜¯å¼ é‡ã€‚</p>
</blockquote>
<hr>
<h3 id="ğŸ“Œ-å¸¸è§ç”¨æ³•ç¤ºä¾‹"><a class="header-anchor" href="#ğŸ“Œ-å¸¸è§ç”¨æ³•ç¤ºä¾‹">ğŸ”—</a>ğŸ“Œ å¸¸è§ç”¨æ³•ç¤ºä¾‹</h3>
<h4 id="1-æœ€ç®€å½¢å¼ï¼ˆåªç»™-endï¼‰"><a class="header-anchor" href="#1-æœ€ç®€å½¢å¼ï¼ˆåªç»™-endï¼‰">ğŸ”—</a>1. æœ€ç®€å½¢å¼ï¼ˆåªç»™ <code>end</code>ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># è¾“å‡º: tensor([0, 1, 2, 3, 4])</span></span><br></pre></td></tr></table></figure>
<h4 id="2-æŒ‡å®š-start-å’Œ-end"><a class="header-anchor" href="#2-æŒ‡å®š-start-å’Œ-end">ğŸ”—</a>2. æŒ‡å®š <code>start</code> å’Œ <code>end</code></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"><span class="comment"># è¾“å‡º: tensor([2, 3, 4, 5])</span></span><br></pre></td></tr></table></figure>
<h4 id="3-æŒ‡å®š-step"><a class="header-anchor" href="#3-æŒ‡å®š-step">ğŸ”—</a>3. æŒ‡å®š <code>step</code></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># è¾“å‡º: tensor([0, 2, 4, 6, 8])</span></span><br></pre></td></tr></table></figure>
<h4 id="4-è´Ÿæ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰"><a class="header-anchor" href="#4-è´Ÿæ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰">ğŸ”—</a>4. è´Ÿæ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">10</span>, <span class="number">0</span>, -<span class="number">2</span>)</span><br><span class="line"><span class="comment"># è¾“å‡º: tensor([10, 8, 6, 4, 2])</span></span><br></pre></td></tr></table></figure>
<h4 id="5-æŒ‡å®šæ•°æ®ç±»å‹"><a class="header-anchor" href="#5-æŒ‡å®šæ•°æ®ç±»å‹">ğŸ”—</a>5. æŒ‡å®šæ•°æ®ç±»å‹</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">0</span>, <span class="number">5</span>, dtype=torch.float32)</span><br><span class="line"><span class="comment"># è¾“å‡º: tensor([0., 1., 2., 3., 4.])</span></span><br></pre></td></tr></table></figure>
<h4 id="6-æŒ‡å®šè®¾å¤‡"><a class="header-anchor" href="#6-æŒ‡å®šè®¾å¤‡">ğŸ”—</a>6. æŒ‡å®šè®¾å¤‡</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">3</span>, device=<span class="string">&#x27;cuda&#x27;</span>)  <span class="comment"># å¦‚æœæœ‰ GPU</span></span><br></pre></td></tr></table></figure>
<h4 id="7-ç”¨äºç´¢å¼•æˆ–ç”Ÿæˆåæ ‡"><a class="header-anchor" href="#7-ç”¨äºç´¢å¼•æˆ–ç”Ÿæˆåæ ‡">ğŸ”—</a>7. ç”¨äºç´¢å¼•æˆ–ç”Ÿæˆåæ ‡</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆç½‘æ ¼ç´¢å¼•</span></span><br><span class="line">h, w = <span class="number">2</span>, <span class="number">3</span></span><br><span class="line">y = torch.arange(h).view(-<span class="number">1</span>, <span class="number">1</span>).repeat(<span class="number">1</span>, w)  <span class="comment"># [[0, 0, 0], [1, 1, 1]]</span></span><br><span class="line">x = torch.arange(w).repeat(h, <span class="number">1</span>)               <span class="comment"># [[0, 1, 2], [0, 1, 2]]</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="âš ï¸-æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹">ğŸ”—</a>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong><code>end</code> ä¸åŒ…å«åœ¨ç»“æœä¸­</strong><br>
ç±»ä¼¼ Python çš„ <code>range()</code>ï¼Œ<code>torch.arange(0, 5)</code> ä¸åŒ…å« <code>5</code>ã€‚</p>
</li>
<li>
<p><strong>æµ®ç‚¹ç²¾åº¦é—®é¢˜</strong><br>
ä½¿ç”¨æµ®ç‚¹æ•°ä½œä¸º <code>start/end/step</code> æ—¶å¯èƒ½å› ç²¾åº¦å¯¼è‡´æ„å¤–æˆªæ–­ï¼Œå»ºè®®ä¼˜å…ˆç”¨æ•´æ•°ï¼Œæˆ–æ”¹ç”¨ <code>torch.linspace</code>ï¼ˆæŒ‡å®šç‚¹æ•°è€Œéæ­¥é•¿ï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯èƒ½å‡ºé—®é¢˜</span></span><br><span class="line">torch.arange(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0.1</span>)  <span class="comment"># æœ€åä¸€ä¸ªå€¼å¯èƒ½æ˜¯ 0.9000... è€Œä¸æ˜¯ 0.9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´å®‰å…¨çš„æ–¹å¼</span></span><br><span class="line">torch.linspace(<span class="number">0</span>, <span class="number">0.9</span>, <span class="number">10</span>)  <span class="comment"># æ˜ç¡®ç”Ÿæˆ 10 ä¸ªç‚¹</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>ä¸ <code>torch.range</code> çš„åŒºåˆ«</strong><br>
<code>torch.range</code> <strong>å·²å¼ƒç”¨ï¼ˆdeprecatedï¼‰</strong>ï¼å®ƒåŒ…å« <code>end</code>ï¼Œä¸”è¡Œä¸ºä¸ä¸€è‡´ï¼Œ<strong>è¯·å§‹ç»ˆä½¿ç”¨ <code>torch.arange</code></strong>ã€‚</p>
</li>
</ol>
<hr>
<h3 id="âœ…-æ€»ç»“"><a class="header-anchor" href="#âœ…-æ€»ç»“">ğŸ”—</a>âœ… æ€»ç»“</h3>
<table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ›å»ºç­‰å·®åºåˆ—</td>
<td>ä» <code>start</code> åˆ° <code>end</code>ï¼ˆä¸å«ï¼‰ï¼Œæ­¥é•¿ <code>step</code></td>
</tr>
<tr>
<td>è¿”å›ç±»å‹</td>
<td>ä¸€ç»´ <code>Tensor</code></td>
</tr>
<tr>
<td>é»˜è®¤ç±»å‹</td>
<td>æ•´æ•°ï¼ˆè‹¥è¾“å…¥ä¸ºæ•´æ•°ï¼‰ï¼›å¯æ˜¾å¼æŒ‡å®š <code>dtype</code></td>
</tr>
<tr>
<td>å¸¸ç”¨äº</td>
<td>ç”Ÿæˆç´¢å¼•ã€ä½ç½®ç¼–ç ã€å¾ªç¯å˜é‡ã€åˆå§‹åŒ–ç­‰</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ğŸ’¡ å°æŠ€å·§ï¼šåœ¨ç›®æ ‡æ£€æµ‹ä¸­ï¼ˆå¦‚ä½ æä¾›çš„ YOLO ä»£ç ï¼‰ï¼Œå¸¸çœ‹åˆ°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proj = torch.arange(<span class="variable language_">self</span>.reg_max, dtype=torch.<span class="built_in">float</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸ºäº†å°†ç¦»æ•£åˆ†å¸ƒï¼ˆå¦‚ 0~15ï¼‰æ˜ å°„å›è¿ç»­åæ ‡ï¼Œé…åˆ <code>softmax + matmul</code> å®ç°æœŸæœ›å€¼è®¡ç®—ã€‚</p>
</blockquote>
<hr>
<p>å¦‚æœ‰æ›´å¤šåœºæ™¯éœ€æ±‚ï¼ˆå¦‚äºŒç»´ç½‘æ ¼ã€éå‡åŒ€åºåˆ—ï¼‰ï¼Œå¯ç»“åˆ <code>meshgrid</code>ã€<code>linspace</code> ç­‰å‡½æ•°ä½¿ç”¨ã€‚</p>
<h1 id="multi-apply"><a class="header-anchor" href="#multi-apply">ğŸ”—</a>multi_apply</h1>
<hr>
<h2 id="ä¸€ã€multi-apply-æ˜¯ä»€ä¹ˆï¼Ÿ"><a class="header-anchor" href="#ä¸€ã€multi-apply-æ˜¯ä»€ä¹ˆï¼Ÿ">ğŸ”—</a>ä¸€ã€<code>multi_apply</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><code>multi_apply</code> æ˜¯ <strong>MMDetection / MMEngine æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°</strong>ï¼Œæœ¬è´¨ä¸Šæ˜¯ï¼š</p>
<blockquote>
<p><strong>â€œå¯¹å¤šä¸ª list åš zipï¼Œç„¶åå¯¹æ¯ä¸€ç»„å…ƒç´ è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°ï¼Œæœ€åæŠŠè¾“å‡ºæŒ‰ç»´åº¦æ‹†æˆ listâ€</strong></p>
</blockquote>
<p>ä¸€å¥è¯ç‰ˆï¼š</p>
<blockquote>
<p><strong><code>multi_apply = zip + map + unzip</code></strong></p>
</blockquote>
<p>å®ƒåœ¨ä½ ç°åœ¨è¿™è¡Œä»£ç ä¸­è¢«ç”¨æ¥ï¼š
ğŸ‘‰ <strong>å¯¹æ¯ä¸€ä¸ª FPN levelï¼Œè°ƒç”¨ä¸€æ¬¡ <code>forward_single</code></strong>ã€‚</p>
<hr>
<h2 id="äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨-multi-applyï¼Ÿ"><a class="header-anchor" href="#äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨-multi-applyï¼Ÿ">ğŸ”—</a>äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨ <code>multi_apply</code>ï¼Ÿ</h2>
<p>ä½ ç°åœ¨çœ‹åˆ°çš„ä»£ç æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> multi_apply(</span><br><span class="line">    <span class="variable language_">self</span>.forward_single,</span><br><span class="line">    img_feats,</span><br><span class="line">    txt_feats,</span><br><span class="line">    txt_masks,</span><br><span class="line">    <span class="variable language_">self</span>.cls_preds,</span><br><span class="line">    <span class="variable language_">self</span>.reg_preds,</span><br><span class="line">    <span class="variable language_">self</span>.cls_contrasts</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸ç”¨ <code>multi_apply</code>ï¼Œä»£ç ä¼šå˜æˆè¿™æ ·ï¼ˆä¼ªä»£ç ï¼‰ğŸ‘‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">outs = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.num_levels):</span><br><span class="line">    outs.append(</span><br><span class="line">        <span class="variable language_">self</span>.forward_single(</span><br><span class="line">            img_feats[i],</span><br><span class="line">            txt_feats[i],</span><br><span class="line">            txt_masks[i],</span><br><span class="line">            <span class="variable language_">self</span>.cls_preds[i],</span><br><span class="line">            <span class="variable language_">self</span>.reg_preds[i],</span><br><span class="line">            <span class="variable language_">self</span>.cls_contrasts[i]</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æŠŠ outs æ‹†æˆ cls_scores, bbox_preds, ...</span></span><br></pre></td></tr></table></figure>
<p>ğŸ‘‰ <strong><code>multi_apply</code> çš„ä½œç”¨ï¼š</strong></p>
<ul>
<li>é¿å…æ‰‹å†™ for-loop</li>
<li>è‡ªåŠ¨å¸®ä½  <strong>å¯¹è¿”å›å€¼åšâ€œè½¬ç½®â€</strong></li>
<li>è®©å¤šå±‚ head çš„ forward ä»£ç éå¸¸å¹²å‡€ã€ç»Ÿä¸€</li>
</ul>
<p>è¿™æ˜¯ MMDet ä½“ç³»é‡Œä¸€ä¸ª<strong>é«˜åº¦æ¨¡å¼åŒ–</strong>çš„å†™æ³•ã€‚</p>
<hr>
<h2 id="ä¸‰ã€multi-apply-åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿï¼ˆæºç çº§ç†è§£ï¼‰"><a class="header-anchor" href="#ä¸‰ã€multi-apply-åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿï¼ˆæºç çº§ç†è§£ï¼‰">ğŸ”—</a>ä¸‰ã€<code>multi_apply</code> åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿï¼ˆæºç çº§ç†è§£ï¼‰</h2>
<p><code>multi_apply</code> çš„ç®€åŒ–å®ç°é€»è¾‘å¯ä»¥ç†è§£ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">multi_apply</span>(<span class="params">func, *args</span>):</span><br><span class="line">    <span class="comment"># 1. zip å¤šä¸ª list</span></span><br><span class="line">    results = [func(*items) <span class="keyword">for</span> items <span class="keyword">in</span> <span class="built_in">zip</span>(*args)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. æŠŠ [(a1,b1,c1), (a2,b2,c2), ...]</span></span><br><span class="line">    <span class="comment">#    è½¬æˆ ([a1,a2,...], [b1,b2,...], [c1,c2,...])</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">tuple</span>(<span class="built_in">map</span>(<span class="built_in">list</span>, <span class="built_in">zip</span>(*results)))</span><br></pre></td></tr></table></figure>
<h3 id="å…³é”®ç‚¹ï¼š"><a class="header-anchor" href="#å…³é”®ç‚¹ï¼š">ğŸ”—</a>å…³é”®ç‚¹ï¼š</h3>
<ul>
<li>
<p><code>zip(*args)</code>
ğŸ‘‰ æŠŠ <strong>åŒä¸€ level çš„ä¸œè¥¿æ†åœ¨ä¸€èµ·</strong></p>
</li>
<li>
<p><code>func(*items)</code>
ğŸ‘‰ å¯¹ <strong>æ¯ä¸ª level è°ƒä¸€æ¬¡ <code>forward_single</code></strong></p>
</li>
<li>
<p><code>zip(*results)</code>
ğŸ‘‰ æŠŠ <strong>â€œæ¯å±‚çš„è¾“å‡ºâ€é‡æ–°æŒ‰ç±»å‹èšåˆ</strong></p>
</li>
</ul>
<hr>
<h2 id="å››ã€æ”¾åˆ°ä½ è¿™è¡Œä»£ç é‡Œï¼Œé€å‚æ•°è§£é‡Š"><a class="header-anchor" href="#å››ã€æ”¾åˆ°ä½ è¿™è¡Œä»£ç é‡Œï¼Œé€å‚æ•°è§£é‡Š">ğŸ”—</a>å››ã€æ”¾åˆ°ä½ è¿™è¡Œä»£ç é‡Œï¼Œé€å‚æ•°è§£é‡Š</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">multi_apply(</span><br><span class="line">    <span class="variable language_">self</span>.forward_single,</span><br><span class="line">    img_feats,        <span class="comment"># List[Tensor]ï¼Œæ¯ä¸ª level ä¸€ä¸ª feature map</span></span><br><span class="line">    txt_feats,        <span class="comment"># List[Tensor]ï¼Œæ¯å±‚åŒä¸€ä»½ text feature</span></span><br><span class="line">    txt_masks,        <span class="comment"># List[Tensor]ï¼Œæ¯å±‚åŒä¸€ä»½ mask</span></span><br><span class="line">    <span class="variable language_">self</span>.cls_preds,   <span class="comment"># List[nn.Module]ï¼Œæ¯å±‚çš„ cls embedding head</span></span><br><span class="line">    <span class="variable language_">self</span>.reg_preds,   <span class="comment"># List[nn.Module]ï¼Œæ¯å±‚çš„ reg head</span></span><br><span class="line">    <span class="variable language_">self</span>.cls_contrasts<span class="comment"># List[nn.Module]ï¼Œæ¯å±‚çš„ contrastive head</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="ç­‰ä»·äºï¼š"><a class="header-anchor" href="#ç­‰ä»·äºï¼š">ğŸ”—</a>ç­‰ä»·äºï¼š</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">level_outputs = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_levels):</span><br><span class="line">    out = <span class="variable language_">self</span>.forward_single(</span><br><span class="line">        img_feats[i],</span><br><span class="line">        txt_feats[i],</span><br><span class="line">        txt_masks[i],</span><br><span class="line">        <span class="variable language_">self</span>.cls_preds[i],</span><br><span class="line">        <span class="variable language_">self</span>.reg_preds[i],</span><br><span class="line">        <span class="variable language_">self</span>.cls_contrasts[i]</span><br><span class="line">    )</span><br><span class="line">    level_outputs.append(out)</span><br></pre></td></tr></table></figure>
<p>å‡è®¾ <code>forward_single</code> è¿”å›çš„æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cls_score, bbox_pred)</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆ <code>multi_apply</code> æœ€ç»ˆè¿”å›çš„æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">  [cls_score_l0, cls_score_l1, cls_score_l2, ...],</span><br><span class="line">  [bbox_pred_l0, bbox_pred_l1, bbox_pred_l2, ...]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘‰ <strong>â€œæŒ‰å±‚ç®—ï¼ŒæŒ‰ç±»å‹æ”¶â€</strong></p>
<hr>
<h2 id="äº”ã€ç»“åˆ-YOLOWorldHeadModule-çš„è¯­ä¹‰æ¥ç†è§£ï¼ˆéå¸¸é‡è¦ï¼‰"><a class="header-anchor" href="#äº”ã€ç»“åˆ-YOLOWorldHeadModule-çš„è¯­ä¹‰æ¥ç†è§£ï¼ˆéå¸¸é‡è¦ï¼‰">ğŸ”—</a>äº”ã€ç»“åˆ YOLOWorldHeadModule çš„è¯­ä¹‰æ¥ç†è§£ï¼ˆéå¸¸é‡è¦ï¼‰</h2>
<p>åœ¨ YOLOWorld ä¸­ï¼š</p>
<ul>
<li>
<p><strong>æ¯ä¸€ä¸ª FPN level</strong></p>
<ul>
<li>ç”¨ <code>cls_preds[i]</code> â†’ å¾—åˆ° image embedding</li>
<li>ç”¨ <code>cls_contrasts[i]</code> + <code>txt_feats</code> â†’ å¾—åˆ° open-vocab åˆ†ç±» logits</li>
<li>ç”¨ <code>reg_preds[i]</code> â†’ å¾—åˆ° bbox å›å½’</li>
</ul>
</li>
</ul>
<p>è€Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">multi_apply(<span class="variable language_">self</span>.forward_single, ...)</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯åœ¨åšï¼š</p>
<blockquote>
<p><strong>â€œå¯¹ P3 / P4 / P5 â€¦â€¦ æ¯ä¸€å±‚ï¼Œé‡å¤åŒä¸€å¥—è®¡ç®—é€»è¾‘â€</strong></p>
</blockquote>
<p>è¿™æ­£æ˜¯ YOLO / RetinaNet / FCOS / YOLOX / YOLOv8 <strong>æ‰€æœ‰å¤šå°ºåº¦ head çš„æ ‡å‡†èŒƒå¼</strong>ã€‚</p>
<hr>
<h2 id="å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•çº§-è®ºæ–‡çº§ï¼‰"><a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•çº§-è®ºæ–‡çº§ï¼‰">ğŸ”—</a>å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•çº§ / è®ºæ–‡çº§ï¼‰</h2>
<blockquote>
<p><strong><code>multi_apply</code> çš„ä½œç”¨æ˜¯ï¼š</strong></p>
<ul>
<li>å¯¹å¤šå°ºåº¦ç‰¹å¾é€å±‚è°ƒç”¨åŒä¸€ä¸ª forward å‡½æ•°</li>
<li>è‡ªåŠ¨å°†æ¯å±‚è¿”å›çš„ç»“æœæŒ‰è¾“å‡ºç±»å‹èšåˆæˆ list</li>
<li>æ˜¯ MMDetection ä½“ç³»ä¸­å®ç°å¤šå±‚æ£€æµ‹å¤´çš„æ ¸å¿ƒå·¥å…·å‡½æ•°</li>
</ul>
</blockquote>
<p>å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ <strong>é€è¡Œæ‹† <code>forward_single</code></strong>ï¼Œé‚£ä¸€å—æ˜¯ <strong>YOLO-Worldâ€œå›¾åƒ embedding + æ–‡æœ¬ embedding â†’ open-vocab åˆ†ç±»â€çš„çœŸæ­£æ ¸å¿ƒé€»è¾‘</strong>ã€‚</p>
<h1 id="torch-Tensor-permute"><a class="header-anchor" href="#torch-Tensor-permute">ğŸ”—</a>torch.Tensor.permute()</h1>
<p><code>torch.Tensor.permute()</code> æ˜¯ PyTorch ä¸­ç”¨äº<strong>é‡æ–°æ’åˆ—å¼ é‡ç»´åº¦ï¼ˆè½´ï¼‰é¡ºåº</strong>çš„é‡è¦æ–¹æ³•ã€‚å®ƒç±»ä¼¼äº NumPy ä¸­çš„ <code>transpose</code>ï¼Œä½†æ›´çµæ´»ï¼Œå¯ä»¥ä»»æ„é‡æ’å¤šä¸ªç»´åº¦ã€‚</p>
<h3 id="ğŸ”§-åŸºæœ¬è¯­æ³•-2"><a class="header-anchor" href="#ğŸ”§-åŸºæœ¬è¯­æ³•-2">ğŸ”—</a>ğŸ”§ åŸºæœ¬è¯­æ³•</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensor.permute(*dims)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>*dims</code>ï¼šä¸€ä¸ªæˆ–å¤šä¸ªæ•´æ•°ï¼Œè¡¨ç¤º<strong>ç›®æ ‡ç»´åº¦çš„é¡ºåº</strong>ã€‚</li>
<li>è¿”å›ä¸€ä¸ªæ–°çš„å¼ é‡ï¼ˆè§†å›¾ï¼Œä¸å¤åˆ¶æ•°æ®ï¼‰ï¼Œå…¶ç»´åº¦æŒ‰æŒ‡å®šé¡ºåºé‡æ’ã€‚</li>
<li>åŸå¼ é‡çš„ç»´åº¦æ•°é‡å¿…é¡»ä¸ <code>dims</code> çš„é•¿åº¦ä¸€è‡´ã€‚</li>
</ul>
<blockquote>
<p>âœ… <strong>å…³é”®ç‚¹</strong>ï¼š<code>permute</code> ä¸æ”¹å˜æ•°æ®å†…å®¹ï¼Œåªæ”¹å˜â€œçœ‹æ•°æ®çš„æ–¹å¼â€ï¼ˆå³ stridesï¼‰ã€‚</p>
</blockquote>
<hr>
<h3 id="ğŸ“Œ-ç”¨æ³•ç¤ºä¾‹"><a class="header-anchor" href="#ğŸ“Œ-ç”¨æ³•ç¤ºä¾‹">ğŸ”—</a>ğŸ“Œ ç”¨æ³•ç¤ºä¾‹</h3>
<h4 id="1-åŸºç¡€ï¼š4D-å¼ é‡ï¼ˆå¦‚å›¾åƒç‰¹å¾å›¾ï¼‰"><a class="header-anchor" href="#1-åŸºç¡€ï¼š4D-å¼ é‡ï¼ˆå¦‚å›¾åƒç‰¹å¾å›¾ï¼‰">ğŸ”—</a>1. åŸºç¡€ï¼š4D å¼ é‡ï¼ˆå¦‚å›¾åƒç‰¹å¾å›¾ï¼‰</h4>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå…¸å‹çš„å·ç§¯ç½‘ç»œè¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)  <span class="comment"># shape: (batch, channel, height, width)</span></span><br><span class="line"><span class="built_in">print</span>(x.shape)  <span class="comment"># torch.Size([2, 3, 4, 5])</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><strong>å°†é€šé“ç»´åº¦ç§»åˆ°æœ€åï¼ˆNCHW â†’ NHWCï¼‰</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x_perm = x.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)  <span class="comment"># (batch, height, width, channel)</span></span><br><span class="line"><span class="built_in">print</span>(x_perm.shape)  <span class="comment"># torch.Size([2, 4, 5, 3])</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>å®Œå…¨æ‰“ä¹±é¡ºåº</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x_perm = x.permute(<span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)  <span class="comment"># (width, batch, height, channel)</span></span><br><span class="line"><span class="built_in">print</span>(x_perm.shape)  <span class="comment"># torch.Size([5, 2, 4, 3])</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-3D-å¼ é‡ï¼ˆå¦‚åºåˆ—æ•°æ®ï¼‰"><a class="header-anchor" href="#2-3D-å¼ é‡ï¼ˆå¦‚åºåˆ—æ•°æ®ï¼‰">ğŸ”—</a>2. 3D å¼ é‡ï¼ˆå¦‚åºåˆ—æ•°æ®ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>)  <span class="comment"># (seq_len, batch, feature)</span></span><br><span class="line"><span class="comment"># è½¬ä¸º (batch, seq_len, feature)</span></span><br><span class="line">x_perm = x.permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(x_perm.shape)  <span class="comment"># torch.Size([20, 10, 30])</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2D-å¼ é‡ï¼ˆçŸ©é˜µè½¬ç½®ï¼‰"><a class="header-anchor" href="#3-2D-å¼ é‡ï¼ˆçŸ©é˜µè½¬ç½®ï¼‰">ğŸ”—</a>3. 2D å¼ é‡ï¼ˆçŸ©é˜µè½¬ç½®ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">x_t = x.permute(<span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># ç­‰ä»·äº x.t() æˆ– x.transpose(0, 1)</span></span><br><span class="line"><span class="built_in">print</span>(x_t.shape)  <span class="comment"># torch.Size([5, 4])</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="âš ï¸-æ³¨æ„äº‹é¡¹-2"><a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹-2">ğŸ”—</a>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>æ‰€æœ‰ç»´åº¦éƒ½å¿…é¡»è¢«æŒ‡å®š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">x.permute(<span class="number">0</span>, <span class="number">1</span>)      <span class="comment"># âŒ é”™è¯¯ï¼ç¼ºå°‘ä¸€ä¸ªç»´åº¦</span></span><br><span class="line">x.permute(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment"># âŒ é”™è¯¯ï¼å¤šäº†ä¸€ä¸ªç»´åº¦</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>ä¸èƒ½é‡å¤æˆ–é—æ¼ç»´åº¦ç´¢å¼•</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x.permute(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)  <span class="comment"># âŒ é”™è¯¯ï¼ç»´åº¦ 0 é‡å¤</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>è´Ÿç´¢å¼•æ”¯æŒï¼ˆä»åå¾€å‰æ•°ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">x.permute(<span class="number">0</span>, -<span class="number">2</span>, -<span class="number">1</span>, <span class="number">1</span>)  <span class="comment"># ç­‰ä»·äº (0, 2, 3, 1)</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>è¿”å›çš„æ˜¯ viewï¼ˆå…±äº«å†…å­˜ï¼‰</strong></p>
<ul>
<li>ä¿®æ”¹ <code>permute</code> åçš„å¼ é‡ä¼šå½±å“åŸå¼ é‡ï¼ˆå¦‚æœæœªæ–­å¼€ï¼‰ã€‚</li>
<li>è‹¥éœ€ç‹¬ç«‹å‰¯æœ¬ï¼ŒåŠ  <code>.contiguous().clone()</code>ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ğŸ’¡-åœ¨ä½ æä¾›çš„ä»£ç ä¸­çš„å®é™…åº”ç”¨"><a class="header-anchor" href="#ğŸ’¡-åœ¨ä½ æä¾›çš„ä»£ç ä¸­çš„å®é™…åº”ç”¨">ğŸ”—</a>ğŸ’¡ åœ¨ä½ æä¾›çš„ä»£ç ä¸­çš„å®é™…åº”ç”¨</h3>
<p>åœ¨ <code>YOLO-World</code> çš„ <code>ContrastiveHead</code> ä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = x.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)  <span class="comment"># bchw -&gt; bhwc</span></span><br><span class="line">x = x.reshape(batch, -<span class="number">1</span>, channel)  <span class="comment"># bhwc -&gt; b(hw)c</span></span><br><span class="line">w = w.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)     <span class="comment"># bkc -&gt; bck</span></span><br><span class="line">x = torch.matmul(x, w)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼š</p>
<ul>
<li><code>x</code> åŸæœ¬æ˜¯ <code>(B, C, H, W)</code>ï¼Œé€šè¿‡ <code>permute(0,2,3,1)</code> å˜æˆ <code>(B, H, W, C)</code>ï¼›</li>
<li>ç„¶å <code>reshape</code> æˆ <code>(B, HÃ—W, C)</code>ï¼Œä¾¿äºå’Œæ–‡æœ¬ç‰¹å¾ <code>w</code>ï¼ˆå½¢çŠ¶ <code>(B, K, C)</code>ï¼‰åšçŸ©é˜µä¹˜æ³•ï¼›</li>
<li><code>w.permute(0,2,1)</code> æŠŠ <code>(B, K, C)</code> å˜æˆ <code>(B, C, K)</code>ï¼Œä½¿å¾— <code>matmul</code> å¾—åˆ° <code>(B, HÃ—W, K)</code>ã€‚</li>
</ul>
<p>è¿™å±•ç¤ºäº† <code>permute</code> åœ¨<strong>è°ƒæ•´å¼ é‡å¸ƒå±€ä»¥åŒ¹é…è¿ç®—è¦æ±‚</strong>ä¸­çš„å…³é”®ä½œç”¨ã€‚</p>
<hr>
<h3 id="âœ…-æ€»ç»“-2"><a class="header-anchor" href="#âœ…-æ€»ç»“-2">ğŸ”—</a>âœ… æ€»ç»“</h3>
<table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½œç”¨</td>
<td>é‡æ’å¼ é‡çš„ç»´åº¦é¡ºåº</td>
</tr>
<tr>
<td>è¾“å…¥</td>
<td>ç»´åº¦ç´¢å¼•å…ƒç»„ï¼ˆå¦‚ <code>(0, 2, 3, 1)</code>ï¼‰</td>
</tr>
<tr>
<td>è¾“å‡º</td>
<td>æ–°çš„å¼ é‡ï¼ˆviewï¼Œå…±äº«æ•°æ®ï¼‰</td>
</tr>
<tr>
<td>å¸¸è§ç”¨é€”</td>
<td>NCHW â†” NHWC è½¬æ¢ã€å‡†å¤‡çŸ©é˜µä¹˜æ³•ã€é€‚é…æ¨¡å‹è¾“å…¥æ ¼å¼ç­‰</td>
</tr>
<tr>
<td>æ›¿ä»£æ–¹æ¡ˆ</td>
<td>å¯¹äºä¸¤ä¸ªç»´åº¦äº¤æ¢ï¼Œå¯ç”¨ <code>.transpose(dim0, dim1)</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>ğŸ’¡ <strong>è®°å¿†æŠ€å·§</strong>ï¼š<code>permute</code> å°±åƒâ€œé‡æ–°å®šä¹‰å“ªä¸ªç»´åº¦æ˜¯è¡Œã€å“ªä¸ªæ˜¯åˆ—ã€å“ªä¸ªæ˜¯é€šé“â€¦â€¦â€</p>
</blockquote>
<p>æŒæ¡ <code>permute</code> æ˜¯å¤„ç†å¤šç»´å¼ é‡ï¼ˆå°¤å…¶æ˜¯ CV/NLP ä»»åŠ¡ï¼‰çš„å¿…å¤‡æŠ€èƒ½ï¼</p>
<h1 id="view"><a class="header-anchor" href="#view">ğŸ”—</a>.view()</h1>
<p>åœ¨PyTorchä¸­ï¼Œ<code>view</code>æ˜¯ç”¨äºé‡å¡‘å¼ é‡ï¼ˆTensorï¼‰å½¢çŠ¶çš„æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯åœ¨ä¸æ”¹å˜å¼ é‡æ•°æ®çš„å‰æä¸‹ï¼Œè°ƒæ•´å¼ é‡çš„ç»´åº¦å’Œå„ç»´åº¦å¤§å°ï¼ˆéœ€ä¿è¯å…ƒç´ æ€»æ•°ä¸å˜ï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proj = torch.arange(<span class="variable language_">self</span>.reg_max, dtype=torch.<span class="built_in">float</span>)</span><br><span class="line">bbox_preds = bbox_dist_preds.softmax(<span class="number">3</span>).matmul(</span><br><span class="line">                <span class="variable language_">self</span>.proj.view([-<span class="number">1</span>, <span class="number">1</span>])).squeeze(-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="ä»£ç ä¸­self-proj-view-1-1-çš„å…·ä½“è§£æï¼š"><a class="header-anchor" href="#ä»£ç ä¸­self-proj-view-1-1-çš„å…·ä½“è§£æï¼š">ğŸ”—</a>ä»£ç ä¸­<code>self.proj.view([-1, 1])</code>çš„å…·ä½“è§£æï¼š</h3>
<ol>
<li>
<p><strong><code>self.proj</code>çš„åŸå§‹å½¢çŠ¶</strong>ï¼š<br>
æ ¹æ®ä»£ç å®šä¹‰ï¼Œ<code>self.proj</code>æ˜¯é€šè¿‡<code>proj = torch.arange(self.reg_max, dtype=torch.float)</code>åˆå§‹åŒ–çš„ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ª<strong>1ç»´å¼ é‡</strong>ï¼Œå½¢çŠ¶ä¸º <code>(reg_max,)</code>ï¼ˆä¾‹å¦‚ï¼Œè‹¥<code>reg_max=16</code>ï¼Œåˆ™å½¢çŠ¶ä¸º<code>(16,)</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong><code>view([-1, 1])</code>çš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li><code>[-1, 1]</code>è¡¨ç¤ºå°†å¼ é‡é‡å¡‘ä¸º<strong>äºŒç»´å¼ é‡</strong>ï¼Œå…¶ä¸­ï¼š
<ul>
<li>ç¬¬äºŒä¸ªç»´åº¦å›ºå®šä¸º<code>1</code>ï¼ˆå³åˆ—æ•°ä¸º1ï¼‰ï¼›</li>
<li>ç¬¬ä¸€ä¸ªç»´åº¦çš„<code>-1</code>è¡¨ç¤ºâ€œè‡ªåŠ¨è®¡ç®—è¯¥ç»´åº¦çš„å¤§å°â€ï¼ˆç”±åŸå§‹å¼ é‡çš„å…ƒç´ æ€»æ•°å’Œå…¶ä»–ç»´åº¦çš„å¤§å°æ¨å¯¼è€Œæ¥ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>å¯¹äºå½¢çŠ¶ä¸º<code>(reg_max,)</code>çš„<code>self.proj</code>ï¼Œ<code>view([-1, 1])</code>ä¼šå°†å…¶é‡å¡‘ä¸º <strong><code>(reg_max, 1)</code></strong> çš„äºŒç»´å¼ é‡ï¼ˆå³â€œåˆ—å‘é‡â€ï¼‰ã€‚<br>
ä¾‹å¦‚ï¼Œ<code>reg_max=16</code>æ—¶ï¼Œé‡å¡‘åå½¢çŠ¶ä»<code>(16,)</code>å˜ä¸º<code>(16, 1)</code>ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„é‡å¡‘ï¼Ÿ</strong><br>
è¿™æ˜¯ä¸ºäº†æ»¡è¶³åç»­çŸ©é˜µä¹˜æ³•ï¼ˆ<code>matmul</code>ï¼‰çš„ç»´åº¦åŒ¹é…è¦æ±‚ï¼š</p>
<ul>
<li>å‰åºå¼ é‡<code>bbox_dist_preds.softmax(3)</code>çš„å½¢çŠ¶ä¸º<code>(batch, h*w, 4, reg_max)</code>ï¼ˆç»è¿‡<code>reshape</code>å’Œ<code>permute</code>å¤„ç†åï¼‰ï¼Œå…¶æœ€åä¸€ä¸ªç»´åº¦ä¸º<code>reg_max</code>ï¼›</li>
<li>çŸ©é˜µä¹˜æ³•è¦æ±‚â€œå‰ä¸€ä¸ªå¼ é‡çš„æœ€åä¸€ä¸ªç»´åº¦â€ä¸â€œåä¸€ä¸ªå¼ é‡çš„ç¬¬ä¸€ä¸ªç»´åº¦â€å¤§å°ç›¸ç­‰ã€‚</li>
<li>é‡å¡‘åçš„<code>self.proj</code>å½¢çŠ¶ä¸º<code>(reg_max, 1)</code>ï¼Œåˆšå¥½ä¸<code>softmax</code>ç»“æœçš„æœ€åä¸€ä¸ªç»´åº¦ï¼ˆ<code>reg_max</code>ï¼‰åŒ¹é…ï¼Œç¡®ä¿ä¹˜æ³•å¯æ‰§è¡Œï¼š<br>
<code>(batch, h*w, 4, reg_max) Ã— (reg_max, 1) â†’ (batch, h*w, 4, 1)</code>ã€‚</li>
</ul>
<p>æœ€ç»ˆé€šè¿‡<code>squeeze(-1)</code>å»æ‰å¤šä½™çš„ç»´åº¦<code>1</code>ï¼Œå¾—åˆ°å½¢çŠ¶ä¸º<code>(batch, h*w, 4)</code>çš„<code>bbox_preds</code>ï¼Œå³è¾¹ç•Œæ¡†çš„é¢„æµ‹ç»“æœã€‚</p>
</li>
</ol>
<h3 id="æ€»ç»“ï¼š"><a class="header-anchor" href="#æ€»ç»“ï¼š">ğŸ”—</a>æ€»ç»“ï¼š</h3>
<p><code>self.proj.view([-1, 1])</code>çš„æ ¸å¿ƒä½œç”¨æ˜¯å°†1ç»´çš„<code>self.proj</code>é‡å¡‘ä¸ºäºŒç»´åˆ—å‘é‡<code>(reg_max, 1)</code>ï¼Œä»¥æ»¡è¶³çŸ©é˜µä¹˜æ³•çš„ç»´åº¦å…¼å®¹æ€§ï¼Œä»è€Œå®ç°å¯¹è¾¹ç•Œæ¡†åˆ†å¸ƒé¢„æµ‹ï¼ˆ<code>bbox_dist_preds</code>ï¼‰çš„åŠ æƒæ±‚å’Œï¼ˆé€šè¿‡ä¸<code>proj</code>çš„å†…ç§¯ï¼‰ï¼Œæœ€ç»ˆå¾—åˆ°å…·ä½“çš„è¾¹ç•Œæ¡†åæ ‡é¢„æµ‹ã€‚</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/python/">python</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/blog/2025/12/18/%E6%9D%82%E8%AE%B0/YOLOv8%20Anchor%20Free%E4%B8%8EDFL%E5%8E%9F%E7%90%86/" title="YOLOv8 Anchor Freeä¸DFLåŸç†"><img class="cover" src="/blog/image/s625d11592724c.jpg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">YOLOv8 Anchor Freeä¸DFLåŸç†</div></div><div class="info-2"><div class="info-item-1">   ç³»åˆ—æ–‡ç«    /   æ‚è®°  ğŸ”—YOLOv8 æ·±åº¦æ¶æ„è§£ææŠ¥å‘Šï¼šAnchor-Free èŒƒå¼å˜é©ä¸åˆ†å¸ƒç„¦ç‚¹æŸå¤± (DFL) çš„æ•°å­¦åŸç†åŠå·¥ç¨‹å®è·µ ğŸ”—1. æ‰§è¡Œæ‘˜è¦ æœ¬ç ”ç©¶æŠ¥å‘Šæ—¨åœ¨å¯¹ Ultralytics å…¬å¸äº 2023 å¹´å‘å¸ƒçš„ YOLOv8 ç›®æ ‡æ£€æµ‹ç®—æ³•è¿›è¡Œè¯¦å°½çš„è§£æ„ä¸åˆ†æï¼Œé‡ç‚¹èšç„¦äºå…¶æ ¸å¿ƒçš„æ¶æ„èŒƒå¼è½¬å˜â€”â€”Anchor-Freeï¼ˆæ— é”šæ¡†ï¼‰æœºåˆ¶ä¸åˆ†å¸ƒç„¦ç‚¹æŸå¤±ï¼ˆDistribution Focal Loss,...</div></div></div></a><a class="pagination-related" href="/blog/2025/12/18/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/yolo-world/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB%EF%BC%9Ayolo_world-models-necks-yolo_world_pafpn.py/" title="ä»£ç è§£è¯»ï¼šyolo_world-models-necks-yolo_world_pafpn.py"><img class="cover" src="/blog/image/A1-2.jpg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">ä»£ç è§£è¯»ï¼šyolo_world-models-necks-yolo_world_pafpn.py</div></div><div class="info-2"><div class="info-item-1">   ç³»åˆ—æ–‡ç«    /   å¼€æ”¾è¯æ±‡æ£€æµ‹ / yolo-world  ğŸ”—class YOLOWorldPAFPN(YOLOv8PAFPN) ğŸ”—def init 1234567891011121314151617@MODELS.register_module()def __init__(self,             in_channels: List[int],             out_channels:...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/blog/image/IMG_20250131_155849.jpg" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">lian</div><div class="author-info-description">é•¿æœŸä¸»ä¹‰å­¦ä¹ è€…ï¼Œè®°å½•æŠ€æœ¯ã€è®ºæ–‡ä¸ç”Ÿæ´»ã€‚</div><div class="site-data"><a href="/blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">43</div></a><a href="/blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">21</div></a><a href="/blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qieliqiean"><i class="fab fa-github"></i><span>è®¿é—® GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/qieliqiean" target="_blank" title="GitHub"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2895014608@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿äº¤æµï¼š2895014608@qq.com</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#isinstance"><span class="toc-text">ğŸ”—isinstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hasattr"><span class="toc-text">ğŸ”—hasattr</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E8%AF%AD%E6%B3%95"><span class="toc-text">ğŸ”—1. å‡½æ•°è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—2. åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="toc-text">ğŸ”—3. é«˜çº§ç”¨æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">ğŸ”—4. æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-%E4%B8%AD-list-%E5%92%8C-dict-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">ğŸ”—Python ä¸­ list å’Œ dict çš„åŒºåˆ«</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E5%AE%9A%E4%B9%89%E5%92%8C%E7%89%B9%E7%82%B9"><span class="toc-text">ğŸ”—1. åŸºæœ¬å®šä¹‰å’Œç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%85%B3%E9%94%AE%E5%8C%BA%E5%88%AB%E6%AF%94%E8%BE%83"><span class="toc-text">ğŸ”—2. å…³é”®åŒºåˆ«æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E5%92%8C%E8%AF%AD%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—3. åˆ›å»ºå’Œè¯­æ³•ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-text">ğŸ”—4. å¸¸è§æ“ä½œå’Œæ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">ğŸ”—5. æ³¨æ„äº‹é¡¹</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PyTorch%E5%BC%A0%E9%87%8F%E5%BD%A2%E7%8A%B6%E4%B8%8Enn-functional-normalize"><span class="toc-text">ğŸ”—PyTorchå¼ é‡å½¢çŠ¶ä¸nn.functional.normalize</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81PyTorch%E5%BC%A0%E9%87%8F%E5%BD%A2%E7%8A%B6%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">ğŸ”—ä¸€ã€PyTorchå¼ é‡å½¢çŠ¶çš„æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%A0%E9%87%8F%E5%BD%A2%E7%8A%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A7%84%E5%88%99"><span class="toc-text">ğŸ”—1. å¼ é‡å½¢çŠ¶çš„åŸºæœ¬è§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9B%B4%E8%A7%82%E7%B1%BB%E6%AF%94%EF%BC%9A%E5%A4%9A%E5%B1%82%E6%94%B6%E7%BA%B3%E7%9B%92"><span class="toc-text">ğŸ”—2. ç›´è§‚ç±»æ¯”ï¼šå¤šå±‚æ”¶çº³ç›’</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%85%B7%E4%BD%93%E5%BC%A0%E9%87%8F%E5%BD%A2%E7%8A%B6%E8%A7%A3%E6%9E%90"><span class="toc-text">ğŸ”—äºŒã€å…·ä½“å¼ é‡å½¢çŠ¶è§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B1%EF%BC%9A%E5%BD%A2%E7%8A%B6%E4%B8%BA-1-2-3-%E7%9A%84%E6%96%87%E6%9C%AC%E7%89%B9%E5%BE%81%E5%BC%A0%E9%87%8F"><span class="toc-text">ğŸ”—ç¤ºä¾‹1ï¼šå½¢çŠ¶ä¸º[1, 2, 3]çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BC%A0%E9%87%8F%E6%9E%84%E5%BB%BA%E4%B8%8E%E7%BB%93%E6%9E%84%E6%8B%86%E8%A7%A3"><span class="toc-text">ğŸ”—1. å¼ é‡æ„å»ºä¸ç»“æ„æ‹†è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%B4%A2%E5%BC%95%E5%8F%96%E5%80%BC%E9%AA%8C%E8%AF%81%E7%BB%B4%E5%BA%A6"><span class="toc-text">ğŸ”—2. ç´¢å¼•å–å€¼éªŒè¯ç»´åº¦</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B2%EF%BC%9A%E5%BD%A2%E7%8A%B6%E4%B8%BA-2-3-5-%E7%9A%84%E6%96%87%E6%9C%AC%E7%89%B9%E5%BE%81%E5%BC%A0%E9%87%8F"><span class="toc-text">ğŸ”—ç¤ºä¾‹2ï¼šå½¢çŠ¶ä¸º[2, 3, 5]çš„æ–‡æœ¬ç‰¹å¾å¼ é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BC%A0%E9%87%8F%E6%9E%84%E5%BB%BA%EF%BC%88%E5%9B%BA%E5%AE%9A%E6%95%B0%E5%80%BC-%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%EF%BC%89"><span class="toc-text">ğŸ”—1. å¼ é‡æ„å»ºï¼ˆå›ºå®šæ•°å€¼+éšæœºç”Ÿæˆï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%B4%E5%BA%A6%E5%90%AB%E4%B9%89%E4%B8%8E%E7%B4%A2%E5%BC%95%E9%AA%8C%E8%AF%81"><span class="toc-text">ğŸ”—2. ç»´åº¦å«ä¹‰ä¸ç´¢å¼•éªŒè¯</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81nn-functional-normalize%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E6%96%87%E6%9C%AC%E7%89%B9%E5%BE%81%E5%BD%92%E4%B8%80%E5%8C%96%EF%BC%89"><span class="toc-text">ğŸ”—ä¸‰ã€nn.functional.normalizeçš„ä½¿ç”¨ï¼ˆæ–‡æœ¬ç‰¹å¾å½’ä¸€åŒ–ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B%E4%B8%8E%E6%A0%B8%E5%BF%83%E5%8F%82%E6%95%B0"><span class="toc-text">ğŸ”—1. å‡½æ•°åŸå‹ä¸æ ¸å¿ƒå‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%B3%E9%94%AE%E5%8F%82%E6%95%B0%EF%BC%9Adim-1%E4%B8%8Ep-2%E7%9A%84%E5%90%AB%E4%B9%89"><span class="toc-text">ğŸ”—2. å…³é”®å‚æ•°ï¼šdim&#x3D;-1ä¸p&#x3D;2çš„å«ä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%85%B7%E4%BD%93%E8%AE%A1%E7%AE%97%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—3. å…·ä½“è®¡ç®—ç¤ºä¾‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%93%8CList-int-%E4%B8%8E-Union-List-int-int"><span class="toc-text">ğŸ”—ğŸ“ŒList[int] ä¸ Union[List[int], int]</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%EF%BC%9F"><span class="toc-text">ğŸ”—ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨ç±»å‹æ³¨è§£ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81List-int-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-text">ğŸ”—äºŒã€List[int] ç”¨æ³•æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E5%AE%9A%E4%B9%89"><span class="toc-text">ğŸ”—1ï¸âƒ£ å®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">ğŸ”—2ï¸âƒ£ å¸¸è§ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—3ï¸âƒ£ ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9C%85-%E6%AD%A3%E7%A1%AE"><span class="toc-text">ğŸ”—âœ… æ­£ç¡®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9D%8C-%E9%94%99%E8%AF%AF"><span class="toc-text">ğŸ”—âŒ é”™è¯¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-text">ğŸ”—4ï¸âƒ£ è®¾è®¡åŸåˆ™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Union-List-int-int-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-text">ğŸ”—ä¸‰ã€Union[List[int], int] ç”¨æ³•æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E5%AE%9A%E4%B9%89-2"><span class="toc-text">ğŸ”—1ï¸âƒ£ å®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="toc-text">ğŸ”—2ï¸âƒ£ å¸¸è§ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E4%B8%A4%E7%A7%8D%E5%90%88%E6%B3%95%E5%86%99%E6%B3%95"><span class="toc-text">ğŸ”—3ï¸âƒ£ ä¸¤ç§åˆæ³•å†™æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9C%85-%E5%86%99%E6%B3%95%E4%B8%80%EF%BC%9A%E9%80%90%E5%B1%82%E6%8C%87%E5%AE%9A%EF%BC%88%E7%B2%BE%E7%BB%86%E6%8E%A7%E5%88%B6%EF%BC%89"><span class="toc-text">ğŸ”—âœ… å†™æ³•ä¸€ï¼šé€å±‚æŒ‡å®šï¼ˆç²¾ç»†æ§åˆ¶ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9C%85-%E5%86%99%E6%B3%95%E4%BA%8C%EF%BC%9A%E7%BB%9F%E4%B8%80%E6%8C%87%E5%AE%9A%EF%BC%88%E7%AE%80%E6%B4%81%EF%BC%89"><span class="toc-text">ğŸ”—âœ… å†™æ³•äºŒï¼šç»Ÿä¸€æŒ‡å®šï¼ˆç®€æ´ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99-2"><span class="toc-text">ğŸ”—4ï¸âƒ£ è®¾è®¡åŸåˆ™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81in-channels-vs-out-channels-%E5%AF%B9%E6%AF%94%E9%80%9F%E8%AE%B0%E8%A1%A8"><span class="toc-text">ğŸ”—å››ã€in_channels vs out_channels å¯¹æ¯”é€Ÿè®°è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%B7%A5%E7%A8%8B%E4%B8%AD%E7%9A%84%E7%9C%9F%E5%AE%9E%E8%A1%8C%E4%B8%BA%EF%BC%88%E5%BE%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-text">ğŸ”—äº”ã€å·¥ç¨‹ä¸­çš„çœŸå®è¡Œä¸ºï¼ˆå¾ˆé‡è¦ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#for-in-range-%E7%9A%84%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-text">ğŸ”—for ... in range():çš„ç”¨æ³•æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">ğŸ”—åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—å¸¸è§ç”¨æ³•ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%EF%BC%88%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%EF%BC%89"><span class="toc-text">ğŸ”—1. åŸºæœ¬ç”¨æ³•ï¼ˆé»˜è®¤å‚æ•°ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%87%E5%AE%9A%E8%B5%B7%E5%A7%8B%E5%80%BC%E5%92%8C%E7%BB%93%E6%9D%9F%E5%80%BC"><span class="toc-text">ğŸ”—2. æŒ‡å®šèµ·å§‹å€¼å’Œç»“æŸå€¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8C%87%E5%AE%9A%E6%AD%A5%E9%95%BF"><span class="toc-text">ğŸ”—3. æŒ‡å®šæ­¥é•¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%B4%9F%E6%95%B0%E6%AD%A5%E9%95%BF%EF%BC%88%E9%80%92%E5%87%8F%E5%BA%8F%E5%88%97%EF%BC%89"><span class="toc-text">ğŸ”—4. è´Ÿæ•°æ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-text">ğŸ”—ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">ğŸ”—å®ç”¨åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%81%8D%E5%8E%86%E5%88%97%E8%A1%A8%E7%B4%A2%E5%BC%95"><span class="toc-text">ğŸ”—1. éå†åˆ—è¡¨ç´¢å¼•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%A1%E7%AE%97%E5%9B%BA%E5%AE%9A%E6%AC%A1%E6%95%B0%E7%9A%84%E5%BE%AA%E7%8E%AF"><span class="toc-text">ğŸ”—2. è®¡ç®—å›ºå®šæ¬¡æ•°çš„å¾ªç¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%94%9F%E6%88%90%E7%89%B9%E5%AE%9A%E5%BA%8F%E5%88%97"><span class="toc-text">ğŸ”—3. ç”Ÿæˆç‰¹å®šåºåˆ—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%80%86%E5%BA%8F%E9%81%8D%E5%8E%86"><span class="toc-text">ğŸ”—4. é€†åºéå†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">ğŸ”—æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8range-%EF%BC%9F"><span class="toc-text">ğŸ”—ä¸ºä»€ä¹ˆç”¨range()ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nn-ModuleList"><span class="toc-text">ğŸ”—nn.ModuleList</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E4%B9%89%E7%9A%84%E5%9B%9E%E7%AD%94"><span class="toc-text">ğŸ”—é€šä¹‰çš„å›ç­”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81nn-ModuleList-%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-text">ğŸ”—ä¸€ã€nn.ModuleList çš„æ ¸å¿ƒåŠŸèƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9C%85-1-%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%86%8C%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-text">ğŸ”—âœ… 1. è‡ªåŠ¨æ³¨å†Œå­æ¨¡å—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9C%85-2-%E6%94%AF%E6%8C%81%E7%B4%A2%E5%BC%95%E3%80%81%E8%BF%AD%E4%BB%A3%E3%80%81len-%E7%AD%89%E6%93%8D%E4%BD%9C"><span class="toc-text">ğŸ”—âœ… 2. æ”¯æŒç´¢å¼•ã€è¿­ä»£ã€len() ç­‰æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9C%85-3-%E4%B8%8E-nn-Sequential-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">ğŸ”—âœ… 3. ä¸ nn.Sequential çš„åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%BB%93%E5%90%88%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">ğŸ”—äºŒã€ç»“åˆä»£ç åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8%E6%99%AE%E9%80%9A-list%EF%BC%9F"><span class="toc-text">ğŸ”—ä¸‰ã€ä¸ºä»€ä¹ˆä¸ç”¨æ™®é€š listï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">ğŸ”—å››ã€æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B1%86%E5%8C%85%E7%9A%84%E5%9B%9E%E7%AD%94"><span class="toc-text">ğŸ”—è±†åŒ…çš„å›ç­”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-text">ğŸ”—æ ¸å¿ƒåŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E%E6%99%AE%E9%80%9APython%E5%88%97%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">ğŸ”—ä¸æ™®é€šPythonåˆ—è¡¨çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E5%85%B7%E4%BD%93%E5%BA%94%E7%94%A8"><span class="toc-text">ğŸ”—ä»£ç ä¸­çš„å…·ä½“åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E7%94%A8%E6%B3%95%E8%A7%A3%E6%9E%90%EF%BC%9A"><span class="toc-text">ğŸ”—å…·ä½“ç”¨æ³•è§£æï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">ğŸ”—å¸¸ç”¨æ“ä½œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#torch-arrange"><span class="toc-text">ğŸ”—torch.arrange</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%A7-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">ğŸ”—ğŸ”§ åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8C-%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—ğŸ“Œ å¸¸è§ç”¨æ³•ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9C%80%E7%AE%80%E5%BD%A2%E5%BC%8F%EF%BC%88%E5%8F%AA%E7%BB%99-end%EF%BC%89"><span class="toc-text">ğŸ”—1. æœ€ç®€å½¢å¼ï¼ˆåªç»™ endï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8C%87%E5%AE%9A-start-%E5%92%8C-end"><span class="toc-text">ğŸ”—2. æŒ‡å®š start å’Œ end</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%8C%87%E5%AE%9A-step"><span class="toc-text">ğŸ”—3. æŒ‡å®š step</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%B4%9F%E6%AD%A5%E9%95%BF%EF%BC%88%E9%80%92%E5%87%8F%E5%BA%8F%E5%88%97%EF%BC%89"><span class="toc-text">ğŸ”—4. è´Ÿæ­¥é•¿ï¼ˆé€’å‡åºåˆ—ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">ğŸ”—5. æŒ‡å®šæ•°æ®ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%8C%87%E5%AE%9A%E8%AE%BE%E5%A4%87"><span class="toc-text">ğŸ”—6. æŒ‡å®šè®¾å¤‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E7%94%A8%E4%BA%8E%E7%B4%A2%E5%BC%95%E6%88%96%E7%94%9F%E6%88%90%E5%9D%90%E6%A0%87"><span class="toc-text">ğŸ”—7. ç”¨äºç´¢å¼•æˆ–ç”Ÿæˆåæ ‡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">ğŸ”—âš ï¸ æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%80%BB%E7%BB%93"><span class="toc-text">ğŸ”—âœ… æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#multi-apply"><span class="toc-text">ğŸ”—multi_apply</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81multi-apply-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">ğŸ”—ä¸€ã€multi_apply æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8-multi-apply%EF%BC%9F"><span class="toc-text">ğŸ”—äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨ multi_applyï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81multi-apply-%E5%88%B0%E5%BA%95%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F%EF%BC%88%E6%BA%90%E7%A0%81%E7%BA%A7%E7%90%86%E8%A7%A3%EF%BC%89"><span class="toc-text">ğŸ”—ä¸‰ã€multi_apply åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿï¼ˆæºç çº§ç†è§£ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E7%82%B9%EF%BC%9A"><span class="toc-text">ğŸ”—å…³é”®ç‚¹ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%94%BE%E5%88%B0%E4%BD%A0%E8%BF%99%E8%A1%8C%E4%BB%A3%E7%A0%81%E9%87%8C%EF%BC%8C%E9%80%90%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A"><span class="toc-text">ğŸ”—å››ã€æ”¾åˆ°ä½ è¿™è¡Œä»£ç é‡Œï¼Œé€å‚æ•°è§£é‡Š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E4%BB%B7%E4%BA%8E%EF%BC%9A"><span class="toc-text">ğŸ”—ç­‰ä»·äºï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%BB%93%E5%90%88-YOLOWorldHeadModule-%E7%9A%84%E8%AF%AD%E4%B9%89%E6%9D%A5%E7%90%86%E8%A7%A3%EF%BC%88%E9%9D%9E%E5%B8%B8%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-text">ğŸ”—äº”ã€ç»“åˆ YOLOWorldHeadModule çš„è¯­ä¹‰æ¥ç†è§£ï¼ˆéå¸¸é‡è¦ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%80%BB%E7%BB%93%EF%BC%88%E9%9D%A2%E8%AF%95%E7%BA%A7-%E8%AE%BA%E6%96%87%E7%BA%A7%EF%BC%89"><span class="toc-text">ğŸ”—å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•çº§ &#x2F; è®ºæ–‡çº§ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#torch-Tensor-permute"><span class="toc-text">ğŸ”—torch.Tensor.permute()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%A7-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-2"><span class="toc-text">ğŸ”—ğŸ”§ åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8C-%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">ğŸ”—ğŸ“Œ ç”¨æ³•ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%EF%BC%9A4D-%E5%BC%A0%E9%87%8F%EF%BC%88%E5%A6%82%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E5%9B%BE%EF%BC%89"><span class="toc-text">ğŸ”—1. åŸºç¡€ï¼š4D å¼ é‡ï¼ˆå¦‚å›¾åƒç‰¹å¾å›¾ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3D-%E5%BC%A0%E9%87%8F%EF%BC%88%E5%A6%82%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="toc-text">ğŸ”—2. 3D å¼ é‡ï¼ˆå¦‚åºåˆ—æ•°æ®ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2D-%E5%BC%A0%E9%87%8F%EF%BC%88%E7%9F%A9%E9%98%B5%E8%BD%AC%E7%BD%AE%EF%BC%89"><span class="toc-text">ğŸ”—3. 2D å¼ é‡ï¼ˆçŸ©é˜µè½¬ç½®ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="toc-text">ğŸ”—âš ï¸ æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A1-%E5%9C%A8%E4%BD%A0%E6%8F%90%E4%BE%9B%E7%9A%84%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8"><span class="toc-text">ğŸ”—ğŸ’¡ åœ¨ä½ æä¾›çš„ä»£ç ä¸­çš„å®é™…åº”ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%80%BB%E7%BB%93-2"><span class="toc-text">ğŸ”—âœ… æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#view"><span class="toc-text">ğŸ”—.view()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%B8%ADself-proj-view-1-1-%E7%9A%84%E5%85%B7%E4%BD%93%E8%A7%A3%E6%9E%90%EF%BC%9A"><span class="toc-text">ğŸ”—ä»£ç ä¸­self.proj.view([-1, 1])çš„å…·ä½“è§£æï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-text">ğŸ”—æ€»ç»“ï¼š</span></a></li></ol></div></div><div class="card-widget card-post-series"><div class="item-headline"><i class="fa-solid fa-layer-group"></i><span>ç³»åˆ—æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/2025/12/18/%E6%9D%82%E8%AE%B0/YOLOv8%20Anchor%20Free%E4%B8%8EDFL%E5%8E%9F%E7%90%86/" title="YOLOv8 Anchor Freeä¸DFLåŸç†"><img src="/blog/image/s625d11592724c.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="YOLOv8 Anchor Freeä¸DFLåŸç†"></a><div class="content"><a class="title" href="/blog/2025/12/18/%E6%9D%82%E8%AE%B0/YOLOv8%20Anchor%20Free%E4%B8%8EDFL%E5%8E%9F%E7%90%86/" title="YOLOv8 Anchor Freeä¸DFLåŸç†">YOLOv8 Anchor Freeä¸DFLåŸç†</a><time datetime="2025-12-18T02:04:06.000Z" title="å‘è¡¨äº 2025-12-18 10:04:06">2025-12-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2025/12/18/%E6%9D%82%E8%AE%B0/python%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%87%BD%E6%95%B0%E7%A7%AF%E7%B4%AF/" title="pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯"><img src="/blog/image/q4SynOBjcxn5gA6.jpeg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯"></a><div class="content"><a class="title" href="/blog/2025/12/18/%E6%9D%82%E8%AE%B0/python%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%87%BD%E6%95%B0%E7%A7%AF%E7%B4%AF/" title="pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯">pythonè¯­æ³•åŠå‡½æ•°ç§¯ç´¯</a><time datetime="2025-12-18T02:04:06.000Z" title="å‘è¡¨äº 2025-12-18 10:04:06">2025-12-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2025/09/23/%E6%9D%82%E8%AE%B0/%E6%9C%AF%E8%AF%AD%E5%8F%8A%E5%85%B3%E9%94%AE%E8%AF%8D/" title="æœ¯è¯­åŠå…³é”®è¯"><img src="/blog/image/29051e0d6c0e82fe7e46a7e50399ff577917a1a3c82ee-6Qx5wo.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="æœ¯è¯­åŠå…³é”®è¯"></a><div class="content"><a class="title" href="/blog/2025/09/23/%E6%9D%82%E8%AE%B0/%E6%9C%AF%E8%AF%AD%E5%8F%8A%E5%85%B3%E9%94%AE%E8%AF%8D/" title="æœ¯è¯­åŠå…³é”®è¯">æœ¯è¯­åŠå…³é”®è¯</a><time datetime="2025-09-23T08:06:54.000Z" title="å‘è¡¨äº 2025-09-23 16:06:54">2025-09-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/2025/09/17/%E6%9D%82%E8%AE%B0/keywords%E9%9B%86%E5%90%88/" title="keywordsé›†åˆ">keywordsé›†åˆ</a><time datetime="2025-09-17T01:27:17.000Z" title="å‘è¡¨äº 2025-09-17 09:27:17">2025-09-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2025/02/27/%E6%9D%82%E8%AE%B0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/" title="æ·±åº¦å­¦ä¹ ç›¸å…³çŸ¥è¯†"><img src="/blog/image/2aa2662f-d453-4a09-8890-87440bd087b8.png" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="æ·±åº¦å­¦ä¹ ç›¸å…³çŸ¥è¯†"></a><div class="content"><a class="title" href="/blog/2025/02/27/%E6%9D%82%E8%AE%B0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/" title="æ·±åº¦å­¦ä¹ ç›¸å…³çŸ¥è¯†">æ·±åº¦å­¦ä¹ ç›¸å…³çŸ¥è¯†</a><time datetime="2025-02-27T06:11:35.000Z" title="å‘è¡¨äº 2025-02-27 14:11:35">2025-02-27</time></div></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/easter-egg/" title="å½©è›‹"><img src="/blog/image/cover/IMG_20260217_201822.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="å½©è›‹"/></a><div class="content"><a class="title" href="/blog/easter-egg/" title="å½©è›‹">å½©è›‹</a><time datetime="2026-02-18T05:09:03.000Z" title="å‘è¡¨äº 2026-02-18 13:09:03">2026-02-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2026/01/21/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/WeDetect/%E3%80%90WeDetect%E3%80%91%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="ã€WeDetectã€‘è®ºæ–‡é˜…è¯»"><img src="/blog/image/cover/9.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="ã€WeDetectã€‘è®ºæ–‡é˜…è¯»"/></a><div class="content"><a class="title" href="/blog/2026/01/21/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/WeDetect/%E3%80%90WeDetect%E3%80%91%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="ã€WeDetectã€‘è®ºæ–‡é˜…è¯»">ã€WeDetectã€‘è®ºæ–‡é˜…è¯»</a><time datetime="2026-01-21T01:41:58.000Z" title="å‘è¡¨äº 2026-01-21 09:41:58">2026-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2026/01/20/AI%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" title="AIä½¿ç”¨æ‰‹å†Œ"><img src="/blog/image/cover/13.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="AIä½¿ç”¨æ‰‹å†Œ"/></a><div class="content"><a class="title" href="/blog/2026/01/20/AI%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" title="AIä½¿ç”¨æ‰‹å†Œ">AIä½¿ç”¨æ‰‹å†Œ</a><time datetime="2026-01-20T01:21:48.000Z" title="å‘è¡¨äº 2026-01-20 09:21:48">2026-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2026/01/19/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/OV-DQUO/%E3%80%90OV-DQUO%E3%80%91%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="ã€OV-DQUOã€‘è®ºæ–‡é˜…è¯»"><img src="/blog/image/cover/2.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="ã€OV-DQUOã€‘è®ºæ–‡é˜…è¯»"/></a><div class="content"><a class="title" href="/blog/2026/01/19/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/OV-DQUO/%E3%80%90OV-DQUO%E3%80%91%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="ã€OV-DQUOã€‘è®ºæ–‡é˜…è¯»">ã€OV-DQUOã€‘è®ºæ–‡é˜…è¯»</a><time datetime="2026-01-19T07:59:50.000Z" title="å‘è¡¨äº 2026-01-19 15:59:50">2026-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2026/01/14/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/YOLO-UniOW/%E3%80%90YOLO-UniOW%E3%80%91%E6%8C%87%E6%A0%87%E8%A7%A3%E9%87%8A/" title="YOLO-UniOW-æŒ‡æ ‡è§£é‡Š"><img src="/blog/image/cover/6.jpeg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="YOLO-UniOW-æŒ‡æ ‡è§£é‡Š"/></a><div class="content"><a class="title" href="/blog/2026/01/14/%E5%BC%80%E6%94%BE%E8%AF%8D%E6%B1%87%E6%A3%80%E6%B5%8B/YOLO-UniOW/%E3%80%90YOLO-UniOW%E3%80%91%E6%8C%87%E6%A0%87%E8%A7%A3%E9%87%8A/" title="YOLO-UniOW-æŒ‡æ ‡è§£é‡Š">YOLO-UniOW-æŒ‡æ ‡è§£é‡Š</a><time datetime="2026-01-14T01:44:34.000Z" title="å‘è¡¨äº 2026-01-14 09:44:34">2026-01-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2025 - 2026 By lian</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">å²å²å¹³ï¼Œå²å²å®‰ï¼Œå²å²å¹³å®‰</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="/blog/true"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark_dimmed' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'qieliqiean/blog',
      'data-repo-id': 'R_kgDONvpdYw',
      'data-category-id': 'DIC_kwDONvpdY84C1DqB',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !true) {
    if (true) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script defer src="/blog/js/site.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/blog/js/search/local-search.js"></script></div></div></body></html>